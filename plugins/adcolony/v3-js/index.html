<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">

	<title>AdColony with JS - SDKBOX</title>
        
        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../../css/base.css?2" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">
        <link href="../../../css/custom.css" rel="stylesheet">
        

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="http://sdkbox.com"><img src="http://www.cocos2d-x.org/s/sdkbox/SDKBOX_logo.png">Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">

            <ul class="nav navbar-nav navbar-right">


            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../..">Overview</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cocos2d-x <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../cocos/">Overview</a>
</li>

                        
                            
<li >
    <a href="../../../installer/">CLI Installer</a>
</li>

                        
                            
<li >
    <a href="../../../qa/cocos_creator/">For Cocos Creator</a>
</li>

                        
                            
  
  <li class="dropdown-submenu">
    <a tabindex="-1" class="non-link">Plugins</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../achievement/">Achievements</a>
</li>

        
            
  

        
            
<li >
    <a href="../">AdColony</a>
</li>

        
            
  

        
            
<li >
    <a href="../../admob/">AdMob</a>
</li>

        
            
  

        
            
<li >
    <a href="../../agecheq/">AgeCheq</a>
</li>

        
            
  

        
            
<li >
    <a href="../../appnext/">Appnext</a>
</li>

        
            
  

        
            
<li >
    <a href="../../appodeal/">Appodeal</a>
</li>

        
            
  

        
            
<li >
    <a href="../../amazon/">Amazon</a>
</li>

        
            
  

        
            
<li >
    <a href="../../apteligent/">Apteligent</a>
</li>

        
            
  

        
            
<li >
    <a href="../../bee7/">Bee7</a>
</li>

        
            
  

        
            
<li >
    <a href="../../chartboost/">Chartboost</a>
</li>

        
            
  

        
            
<li >
    <a href="../../ethwallet/">EthWallet</a>
</li>

        
            
<li >
    <a href="../../facebook/">Facebook</a>
</li>

        
            
  

        
            
<li >
    <a href="../../gameroom/">Facebook Gameroom</a>
</li>

        
            
  

        
            
<li >
    <a href="../../firebase/">Firebase</a>
</li>

        
            
  

        
            
<li >
    <a href="../../flurryanalytics/">Flurry Analytics</a>
</li>

        
            
  

        
            
<li >
    <a href="../../fyber/">Fyber</a>
</li>

        
            
  

        
            
<li >
    <a href="../../googleanalytics/">Google Analytics</a>
</li>

        
            
  

        
            
<li >
    <a href="../../googleplay/">Google Play Games</a>
</li>

        
            
  

        
            
<li >
    <a href="../../hms/">Huawei Mobile Services</a>
</li>

        
            
  

        
            
<li >
    <a href="../../iap/">In-App Purchase</a>
</li>

        
            
  

        
            
<li >
    <a href="../../inmobi/">InMobi</a>
</li>

        
            
  

        
            
<li >
    <a href="../../kochava/">Kochava</a>
</li>

        
            
  

        
            
<li >
    <a href="../../leadbolt/">LeadBolt</a>
</li>

        
            
  

        
            
<li >
    <a href="../../leaderboard/">Leaderboard</a>
</li>

        
            
  

        
            
<li >
    <a href="../../misc/">Misc</a>
</li>

        
            
  

        
            
<li >
    <a href="../../onesignal/">OneSignal</a>
</li>

        
            
  

        
            
<li >
    <a href="../../playphone/">Playphone</a>
</li>

        
            
  

        
            
<li >
    <a href="../../phunwareads/">Phunware Ads</a>
</li>

        
            
  

        
            
<li >
    <a href="../../phunwaremessaging/">Phunware Messaging</a>
</li>

        
            
  

        
            
<li >
    <a href="../../review/">Ratings & Reviews</a>
</li>

        
            
  

        
            
<li >
    <a href="../../sdkboxads/">SDKBOX Ads</a>
</li>

        
            
  

        
            
<li >
    <a href="../../sdkboxplay/">SDKBOX Play</a>
</li>

        
            
  

        
            
<li >
    <a href="../../share/">Social Sharing</a>
</li>

        
            
  

        
            
<li >
    <a href="../../signinwithapple/">Sign in with Apple</a>
</li>

        
            
  

        
            
<li >
    <a href="../../tapcore/">Tapcore</a>
</li>

        
            
  

        
            
<li >
    <a href="../../tune/">Tune</a>
</li>

        
            
  

        
            
<li >
    <a href="../../unityads/">UnityAds</a>
</li>

        
            
  

        
            
<li >
    <a href="../../valuepotion/">Valuepotion</a>
</li>

        
            
  

        
            
<li >
    <a href="../../vungle/">Vungle</a>
</li>

        
            
  

        
            
<li >
    <a href="../../youtube/">Youtube</a>
</li>

        
            
  

        
    </ul>
  </li>
  

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Unity <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../unity/allinone/">SDKBOX AllInOne</a>
</li>

                        
                            
<li >
    <a href="../../../unity/iap/">In-App Purchase</a>
</li>

                        
                            
<li >
    <a href="../../../unity/review/">Ratings & Reviews</a>
</li>

                        
                            
<li >
    <a href="../../../unity/socialshare/">SocialShare</a>
</li>

                        
                            
<li >
    <a href="../../../unity/googleanalytics/">Google Analytics</a>
</li>

                        
                            
<li >
    <a href="../../../unity/sdkboxplay/">SDKBOX Play</a>
</li>

                        
                            
<li >
    <a href="../../../unity/addeals/">AdDeals</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Unreal <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../unreal/iap/">In-App Purchase</a>
</li>

                        
                            
<li >
    <a href="../../../unreal/chartboost/">Chartboost</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">LiveOps <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../liveops/">Setup</a>
</li>

                        
                            
<li >
    <a href="../../../liveops/remote-config/">Remote Configuration</a>
</li>

                        
                            
<li >
    <a href="../../../liveops/receipt-verification/">Server-side IAP receipt verification</a>
</li>

                        
                            
<li >
    <a href="../../../liveops/catalog-management/">On-the-fly catalog management</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../qa/install_sdkbox/">Install SDKBox</a>
</li>

                        
                            
<li >
    <a href="../../../qa/from-google-to-amazon/">From Google to Amazon</a>
</li>

                        
                            
<li >
    <a href="../../../qa/integration-admob-to-creator/">Admob in Creator</a>
</li>

                        
                            
<li >
    <a href="../../../qa/integration-fyber-to-cocos/">Fyber with Cocos2d-x</a>
</li>

                        
                            
<li >
    <a href="../../../qa/fb-share-on-cocos/">Facebook with Cocos2d-x</a>
</li>

                        
                            
<li >
    <a href="../../../qa/android_64k/">Fix Android 64K methods limit</a>
</li>

                        
                            
<li >
    <a href="../../../qa/integration-iap-on-unity/">IAP with Unity</a>
</li>

                        
                            
<li >
    <a href="../../../qa/use-gui-integration-ga-to-creator/">GA with SDKBox GUI in Creator</a>
</li>

                        
                            
<li >
    <a href="../../../qa/use-custom-activity-on-unity/">Unity Custom Activity</a>
</li>

                        
                            
<li >
    <a href="../../../qa/crypt-sdkbox-config/">Encrypt Decrypt sdkbox_config.json</a>
</li>

                        
                            
<li >
    <a href="../../../qa/sdkboxplay_troubleshoot/">SDKBoxPlay Troubleshoot</a>
</li>

                        
                            
<li >
    <a href="../../../qa/iap_troubleshoot/">IAP Troubleshoot</a>
</li>

                        
                            
<li >
    <a href="../../../qa/sdkbox-cmake/">CMake</a>
</li>

                        
                            
<li >
    <a href="../../../qa/faq/">FAQ</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../../release-note/">About</a>
                    </li>
                
                

                <li style="margin-left:30px">
                    <a href="http://sdkbox-doc.github.io/zh/">中文</a>
                </li>
                
                </ul>
            




            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#prerequisites">Prerequisites</a></li>
	
    
        <li class="main "><a href="#sdk-version">SDK Version</a></li>
	
    
        <li class="main "><a href="#integration">Integration</a></li>
	
    
        <li class="main "><a href="#important-notice">Important Notice</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#disable-app-transport-security">Disable App Transport Security</a></li>
        
            <li><a href="#disable-bitcode-support">Disable Bitcode support</a></li>
        
            <li><a href="#set-your-game-requires-full-screen">Set your game requires full screen</a></li>
        
            <li><a href="#whitelist-canopenurl-function">Whitelist canOpenURL function</a></li>
        
            <li><a href="#json-configuration">JSON Configuration</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#usage">Usage</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#register-javascript-functions">Register Javascript Functions</a></li>
        
            <li><a href="#initialize-adcolony">Initialize AdColony</a></li>
        
            <li><a href="#showing-ads">Showing Ads</a></li>
        
            <li><a href="#catch-adcolony-events-optional">Catch AdColony events (optional)</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#api-reference">API Reference</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#methods">Methods</a></li>
        
            <li><a href="#listeners">Listeners</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#manual-integration">Manual Integration</a></li>
	
    
        <li class="main "><a href="#manual-integration-for-ios">Manual Integration For iOS</a></li>
	
    
        <li class="main "><a href="#manual-integration-for-android">Manual Integration For Android</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#copy-files">Copy Files</a></li>
        
            <li><a href="#edit-androidmanifestxml">Edit AndroidManifest.xml</a></li>
        
            <li><a href="#edit-androidmk">Edit Android.mk</a></li>
        
            <li><a href="#modify-applicationmk-cocos2d-x-v30-to-v32-only">Modify Application.mk (Cocos2d-x v3.0 to v3.2 only)</a></li>
        
            <li><a href="#modify-appactivityjava">Modify AppActivity.java</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#proguard-optional">Proguard (optional)</a></li>
	
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p><a href="../">&#8249; AdColony Doc Home</a></p>
<h1>AdColony Integration Guide</h1>

<h4><em><b>For the Javascript version of cocos2d-x v3.x</b> - (<a href="./../">all other versions</a>)</em></h4>

<h2 id="prerequisites">Prerequisites</h2>
<p>Certain SDKBOX plugins do not work together. If you use <strong>AdColony</strong>, then you cannot also use the <strong>Fyber</strong> and <strong>SOOMLA GROW</strong> services, in the same project.</p>
<p>Start from AdColony 3.0 it requires you to config your app to support all orientations, please read the details <a href="https://github.com/AdColony/AdColony-iOS-SDK-3/wiki/Xcode-Project-Setup#configuring-supported-orientations">here</a></p>
<h2 id="sdk-version">SDK Version</h2>
<ul>
<li>ios: 3.3.4</li>
<li>android: 3.3.8</li>
</ul>
<h2 id="integration">Integration</h2>
<p>Open a terminal and use the following command to install the SDKBOX AdColony plugin. Make sure you setup the SDKBOX installer correctly.</p>
<pre><code class="bash">$ sdkbox import adcolony
</code></pre>

<h2 id="important-notice">Important Notice</h2>
<p>Please make sure the following settings in your project to make the plugin work well.</p>
<h4 id="disable-app-transport-security">Disable App Transport Security</h4>
<p>Adding the following entry to the <code>info.plist</code> file:</p>
<pre><code>&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;
&lt;dict&gt;
    &lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;
    &lt;true/&gt;
&lt;/dict&gt;
</code></pre>

<p>It should look like this:</p>
<p><img alt="" src="../../../imgs/ATS.png" /></p>
<h4 id="disable-bitcode-support">Disable Bitcode support</h4>
<p>You have to turn off <strong>Bitcode</strong> support. If you don't, cocos2d-x will fail to build.</p>
<h4 id="set-your-game-requires-full-screen">Set your game requires full screen</h4>
<p>If your game doesn't support all screen orientations, you will need to check <code>Requires full screen</code> in Xcode. If you do not, your app will fail Apple's submission process.</p>
<h4 id="whitelist-canopenurl-function">Whitelist canOpenURL function</h4>
<p>This setting depends on what plugins are in your project. You may need to add the required entry to the <code>info.plist</code>, under <code>LSApplicationQueriesSchemes</code>.</p>
<!--## Configuration

## Remote Configuration

Optionally, you can choose to use SDKBOX LiveOps to remotely update this plugin's configuration. [Learn more](/liveops/remote-config)-->

<h3 id="json-configuration">JSON Configuration</h3>
<p>SDKBOX Installer will automatically inject a sample configuration to your <code>res/sdkbox_config.json</code>, that you have to modify it before you can use it for your own app</p>
<p>Here is an example of the AdColony configuration, you need to replace <code>&lt;app id&gt;</code> and <code>&lt;zone id&gt;</code> items with your specific <a href="https://clients.adcolony.com/login">AdColony</a> account information.</p>
<pre><code class="json">&quot;AdColony&quot;:{
    &quot;id&quot;:&quot;&lt;app id&gt;&quot;,
    &quot;debug&quot;:true,
    &quot;ads&quot;:{
        &quot;video&quot;:{
            &quot;zone&quot;: &quot;&lt;zone id&gt;&quot;,
            &quot;v4vc&quot;: false
        },
        &quot;v4vc&quot;:{
            &quot;zone&quot;: &quot;&lt;zone id&gt;&quot;,
            &quot;v4vc&quot;: true,
            &quot;pre_popup&quot; : true,
            &quot;post_popup&quot;: true
        },
        &quot;banner&quot;: {
            &quot;zone&quot;: &quot;&lt;zone id&gt;&quot;,
            &quot;type&quot;:&quot;banner&quot;,
            &quot;alignment&quot;:&quot;bottom&quot;,
            &quot;width&quot;: 320,
            &quot;height&quot;: 50
        }
    }
}
</code></pre>

<p>banner.width: when banner.width is smaller than 10, we will take banner.width as special value, which means we will create adcolony preset banner. now we used following value.</p>
<ul>
<li>0: kAdColonyAdSizeBanner(standard,320*50)</li>
<li>1: kAdColonyAdSizeMediumRectangle(medium,300x250)</li>
<li>2: kAdColonyAdSizeLeaderboard(Leaderboard,728x90)</li>
<li>3: kAdColonyAdSizeSkyscraper(Skyscraper,160x600)</li>
</ul>
<p>as the above, set banner.width 0 will create a standard(320X250) banner, set banner.width 1 will create a medium(300X250) banner, height should be 0 when width is special value.</p>
<p>banner.alignment: available values: </p>
<ul>
<li>center</li>
<li>top</li>
<li>bottom</li>
<li>left</li>
<li>right</li>
<li>top_left</li>
<li>top_right</li>
<li>bottom_left</li>
<li>bottom_right</li>
<li>left_top</li>
<li>left_bottom</li>
<li>right_top</li>
<li>right_bottom</li>
</ul>
<!---->

<h2 id="usage">Usage</h2>
<h3 id="register-javascript-functions">Register Javascript Functions</h3>
<p>You need to register all the Adcolony JS functions with cocos2d-x before using them.</p>
<p>To do this:
* Modify <code>./frameworks/runtime-src/Classes/AppDelegate.cpp</code> to include the following headers:</p>
<pre><code class="cpp">#include &quot;PluginAdColonyJS.hpp&quot;
#include &quot;PluginAdColonyJSHelper.h&quot;
</code></pre>

<ul>
<li>Modify <code>./frameworks/runtime-src/Classes/AppDelegate.cpp</code> make sure to call:</li>
</ul>
<pre><code class="cpp">sc-&gt;addRegisterCallback(register_all_PluginAdColonyJS);
sc-&gt;addRegisterCallback(register_all_PluginAdColonyJS_helper);
</code></pre>

<h3 id="initialize-adcolony">Initialize AdColony</h3>
<p>Initialize the plugin by calling <code>init()</code> where appropriate in your code. We
recommend to do this in the <code>app.js</code>. Example:</p>
<pre><code class="javascript">sdkbox.PluginAdColony.init();
</code></pre>

<h3 id="showing-ads">Showing Ads</h3>
<p>Display an ad wherever you want from your code, by specifying ad type:</p>
<pre><code class="cpp">sdkbox.PluginAdColony.show(&quot;video&quot;);
</code></pre>

<p>or:</p>
<pre><code class="cpp">sdkbox.PluginAdColony.show(&quot;v4vc&quot;);
</code></pre>

<h3 id="catch-adcolony-events-optional">Catch AdColony events (optional)</h3>
<p>This allows you to catch the <code>AdColony</code> events so that you can perform operations such as providing player rewards for watching the video.</p>
<ul>
<li>Create a listener (demonstrated by logging events):</li>
</ul>
<pre><code class="javascript">/**
 * The structure of data
 * data.name : name of the ad (in sdkbox_config.json)
 * data.zoneID : the zoneID of the ad
 * data.shown : indicates wether the ad gets shown or closed by user
 * data.iapEnabled : indicating whether or not the associated ad is an IAP
 * data.iapProductID : product identifier for the associated ad's IAP
 * data.iapQuantity : he number of items the user wishes to purchase
 * data.iapEngagementType : indicating the IAP engagement mechanism
 */

sdkbox.PluginAdColony.setListener({
    adColonyInterstitialDidLoad: function(interstitial) {
    },
    adColonyInterstitialDidFailToLoad: function(error) {
    },
    adColonyInterstitialWillOpen: function(interstitial) {
    },
    adColonyInterstitialDidClose: function(interstitial) {
    },
    adColonyInterstitialExpired: function(interstitial) {
    },
    adColonyInterstitialWillLeaveApplication: function(interstitial) {
    },
    adColonyInterstitialDidReceiveClick: function(interstitial) {
    },
    adColonyInterstitialIapOpportunity: function(interstitial, iapProductID, engagement) {
    },
    adColonyAdViewDidLoad: function(adView) {
    },
    adColonyAdViewDidFailToLoad: function(error) {
    },
    adColonyAdViewWillLeaveApplication: function(adView) {
    },
    adColonyAdViewWillOpen: function(adView) {
    },
    adColonyAdViewDidClose: function(adView) {
    },
    adColonyAdViewDidReceiveClick: function(adView) {
    },
    adColonyReward: function(name, currencyName, amount, success) {
    }
});
</code></pre>

<h2 id="api-reference">API Reference</h2>
<h3 id="methods">Methods</h3>
<pre><code class="javascript">sdkbox.PluginAdColony.setGDPR(enabled);
</code></pre>

<blockquote>
<p>Set GDPR</p>
</blockquote>
<pre>
>>NOTE>>: please call before 'init' function
</pre>

<pre><code class="javascript">sdkbox.PluginAdColony.init();
</code></pre>

<blockquote>
<p>initialize the plugin instance.</p>
</blockquote>
<pre><code class="javascript">sdkbox.PluginAdColony.show(name);
</code></pre>

<blockquote>
<p>play video ad using provided name that was specified in sdkbox_config.json</p>
</blockquote>
<pre><code class="javascript">sdkbox.PluginAdColony.setListener(listener);
</code></pre>

<blockquote>
<p>Set listener to listen for adcolony events</p>
</blockquote>
<pre><code class="javascript">sdkbox.PluginAdColony.zoneStatusForZone(zoneID);
</code></pre>

<blockquote>
<p>Returns the zone status for the specified zone.</p>
</blockquote>
<pre>
@deprecated please use getStatus(name) instead
</pre>

<pre><code class="javascript">sdkbox.PluginAdColony.getStatus(name);
</code></pre>

<blockquote>
<p>Check the availability of the adcolony ads by name</p>
</blockquote>
<pre><code class="javascript">sdkbox.PluginAdColony.setCustomID(customID);
</code></pre>

<blockquote>
<p>Assigns your own custom identifier to the current app user.</p>
</blockquote>
<pre>
Once you've provided an identifier, AdColony will persist it across app
restarts (stored on disk only) until you update it. If using this method,
call it before `+ configureWithAppID:zoneIDs:delegate:logging:` so that the
identifier is used consistently across all server communications. The
identifier will also pass through to server-side V4VC callbacks.
@see getCustomID
</pre>

<pre><code class="javascript">sdkbox.PluginAdColony.getCustomID();
</code></pre>

<blockquote>
<p>Returns the device's current custom identifier.</p>
</blockquote>
<pre>
@return The custom identifier string most recently set using `+ setCustomID:`.
@see setCustomID:
</pre>

<pre><code class="javascript">sdkbox.PluginAdColony.getUniqueDeviceID();
</code></pre>

<blockquote>
<p>Returns an AdColony-defined device identifier.</p>
</blockquote>
<pre>
This identifier should remain constant across the lifetime of an iOS device.
The identifier is a SHA-1 hash of the lowercase colon-separated MAC address of the device's WiFi interface.
We do not recommend using this
identifier for new integrations. This method is provided for backwards compatibility.
@return The string representation of the device's AdColony identifier.
</pre>

<pre><code class="javascript">sdkbox.PluginAdColony.getAdvertisingIdentifier();
</code></pre>

<blockquote>
<p>Returns the device's advertising identifier.</p>
</blockquote>
<pre>
This value can change if the user restores their device or resets ad tracking.
@return The string representation of the device's advertising identifier, introduced in iOS 6. Returns `nil` on iOS 5 or below.
@note this function only available on ios
</pre>

<pre><code class="javascript">sdkbox.PluginAdColony.getVendorIdentifier();
</code></pre>

<blockquote>
<p>Returns the device's vendor identifier.</p>
</blockquote>
<pre>
@return As of version 2.3 of our iOS SDK, AdColony no longer collects the vendor identifier and this method will return `nil`. This method is provided for backwards compatibility.
@note this function only available on ios
</pre>

<pre><code class="javascript">sdkbox.PluginAdColony.getVideosPerReward(currencyName);
</code></pre>

<blockquote>
<p>Returns the number of ads that the user must play to earn the designated reward.</p>
</blockquote>
<pre>
@note this function only available on ios
</pre>

<pre><code class="javascript">sdkbox.PluginAdColony.getVideoCreditBalance(currencyName);
</code></pre>

<blockquote>
<p>Returns the number of ads that the user has seen towards their next reward.</p>
</blockquote>
<pre>
@note this function only available on ios
</pre>

<pre><code class="javascript">sdkbox.PluginAdColony.cancelAd();
</code></pre>

<blockquote>
<p>Cancels any full-screen ad that is currently playing and returns control to the app.</p>
</blockquote>
<pre>
No earnings or V4VC rewards will occur if an ad is canceled programmatically by the app.
This should only be used by apps that must immediately respond to non-standard incoming events,
like a VoIP phone call. This should not be used for standard app interruptions such as
multitasking or regular phone calls.
</pre>

<pre><code class="javascript">sdkbox.PluginAdColony.videoAdCurrentlyRunning();
</code></pre>

<blockquote>
<p>Whether a full-screen AdColony ad is currently being played.</p>
</blockquote>
<pre>
@return A boolean indicating if AdColony is currently playing an ad.
@note this function only available on ios
</pre>

<pre><code class="javascript">sdkbox.PluginAdColony.turnAllAdsOff();
</code></pre>

<blockquote>
<p>This method permanently turns off all AdColony ads for this app on the current device.</p>
</blockquote>
<pre>
After this method is called, no ads will be played unless the app is deleted and reinstalled.
This method could be used in the implementation of an In-App Purchase to disable ads;
make sure to allow In-App Purchases to be restored by the user in the case of deleting and reinstalling the app.
@note this function only available on ios
</pre>

<pre><code class="javascript">sdkbox.PluginAdColony.setUserMetadata(metadataType, value);
</code></pre>

<blockquote>
<p>Provide AdColony with per-user non personally-identifiable information for ad targeting purposes.</p>
</blockquote>
<pre>
Providing non personally-identifiable information using this API will improve targeting and unlock
improved earnings for your app. [This support article](http://support.adcolony.com/customer/portal/articles/700183-sdk-user-metadata-pass-through) contains usage guidelines.
@note this function only available on ios
</pre>

<pre><code class="javascript">sdkbox.PluginAdColony.userInterestedIn(topic);
</code></pre>

<blockquote>
<p>Provide AdColony with real-time feedback about what a user is interested in.</p>
</blockquote>
<pre>
Providing non personally-identifiable information using this API will improve targeting and unlock
improved earnings for your app. [This support article](http://support.adcolony.com/customer/portal/articles/700183-sdk-user-metadata-pass-through) contains usage guidelines.
You can call this as often as you want with various topics that the user has engaged in
within your app or as the user engages in them. For example, if the user has started browsing
the finance section of a news app, a developer should call: `[AdColony userInterestedIn:@"finance"]`.
@note this function only available on ios
</pre>

<pre><code class="javascript">sdkbox.PluginAdColony.notifyIAPComplete(transactionID,
                                         productID,
                                         quantity,
                                         price,
                                         currencyCode);
</code></pre>

<blockquote>
<p>Call this method to report IAPs within your application. Note that this API can be leveraged to report standard IAPs
as well as those triggered by AdColony’s IAP Promo (IAPP) advertisements and will improve overall ad targeting.</p>
</blockquote>
<pre>
@see onAdColonyIAPRequest:quantity
</pre>

<pre><code class="javascript">sdkbox.PluginAdColony.requestAllAds();
</code></pre>

<blockquote>
<p>Request all ads</p>
</blockquote>
<h3 id="listeners">Listeners</h3>
<pre><code class="javascript">adColonyInterstitialDidLoad(adName);
</code></pre>

<blockquote>
<p>called when AdColony interstitial has loaded.</p>
</blockquote>
<pre><code class="javascript">adColonyInterstitialDidFailToLoad(error);
</code></pre>

<blockquote>
<p>called when AdColony interstitial loaded failed.</p>
</blockquote>
<pre><code class="javascript">adColonyAdViewDidLoad(adName);
</code></pre>

<blockquote>
<p>called when AdColony banner has loaded.</p>
</blockquote>
<pre><code class="javascript">adColonyAdViewDidFailToLoad(error);
</code></pre>

<blockquote>
<p>called when AdColony banner loaded failed.</p>
</blockquote>
<pre><code class="javascript">adColonyReward(name, currencyName, amount, success);
</code></pre>

<blockquote>
<p>reward was received.</p>
</blockquote>
<h2 id="manual-integration">Manual Integration</h2>
<p>If the <em>SDKBOX Installer</em> <strong>fails</strong> to complete successfully, it is possible to integrate SDKBOX manually. If the installer complete successfully, please <strong>do not</strong> complete anymore of this document. It is not necessary.</p>
<p>These steps are listed last in this document on purpose as they are seldom needed. If you find yourself using these steps, please, after completing, double back and re-read the steps above for other integration items.</p>
<h2 id="manual-integration-for-ios">Manual Integration For iOS</h2>
<p>Drag and drop the following frameworks from the <strong>plugins/ios</strong> folder of the <code>AdColony</code> bundle into your Xcode project, check <code>Copy items if needed</code> when adding frameworks:</p>
<blockquote>
<p>sdkbox.framework</p>
<p>PluginAdColony.framework</p>
<p>AdColony.framework</p>
</blockquote>
<p>The above frameworks depend upon a large number of other frameworks. You also need to add the following system frameworks, if you don't already have them:</p>
<blockquote>
<p>libz.1.2.5.dylib</p>
<p>AdSupport.framework (Set to Optional)</p>
<p>AudioToolbox.framework</p>
<p>AVFoundation.framework</p>
<p>CoreGraphics.framework</p>
<p>CoreMedia.framework</p>
<p>CoreTelephony.framework</p>
<p>EventKit.framework</p>
<p>EventKitUI.framework</p>
<p>MediaPlayer.framework</p>
<p>MessageUI.framework</p>
<p>QuartzCore.framework</p>
<p>Security.framework</p>
<p>GameController.framework</p>
<p>Social.framework (Set to Optional)</p>
<p>StoreKit.framework (Set to Optional)</p>
<p>SystemConfiguration.framework</p>
<p>WebKit.framework (Set to Optional)</p>
</blockquote>
<p>Add two separate linker flags to:
<strong>Target -&gt; Build Settings -&gt; Linking -&gt; Other Linker Flags</strong>:</p>
<blockquote>
<p>-ObjC</p>
<p>-fobjc-arc (this allows AdColony to use ARC even if your project does not)</p>
</blockquote>
<p>Copy all source and header files from <code>plugin/jsbindings/</code> to your projects <code>Classes</code> folder.</p>
<p><strong>NOTE</strong>: <code>plugin/jsbindings/jsb2</code> for creator 1.7.</p>
<p>Add these same files, that you just copied, to Xcode by either dragging and dropping them into Xcode or by using <strong>File -&gt; Add files to...</strong>.</p>
<h2 id="manual-integration-for-android">Manual Integration For Android</h2>
<p>SDKBOX supports three different kinds of <strong>Android</strong> projects <strong>command-line</strong>, <strong>eclipse</strong> and <strong>Android Studio</strong>. </p>
<ul>
<li><code>proj.android</code> will be used as our <code>&lt;project_root&gt;</code> for <strong>command-line</strong> and <strong>eclipse</strong> project</li>
<li><code>proj.android-studio</code> will be used as our <code>&lt;project_root&gt;</code> for <strong>Android Studio</strong> project.</li>
</ul>
<h3 id="copy-files">Copy Files</h3>
<p>Copy the following <strong>jar</strong> files from <code>plugin/android/libs</code> folder of this
bundle into your project's <strong><project_root>/libs</strong> folder.</p>
<blockquote>
<p>adcolony.jar</p>
<p>PluginAdColony.jar</p>
<p>sdkbox.jar</p>
</blockquote>
<ul>
<li>
<p>If you're using cocos2d-x from source copy the <strong>jar</strong> files to:</p>
<p>Android command-line:
<code>cocos2d/cocos/platform/android/java/libs</code></p>
<p>Android Studio:
<pre>
cocos2d/cocos/platform/android/java/libs
cocos2d/cocos/platform/android/libcocos2dx/libs
</pre></p>
</li>
<li>
<p>If you're using cocos2d-js or lua copy the <strong>jar</strong> files to:</p>
<p>Android command-line:
<code>frameworks/cocos2d-x/cocos/platform/android/java/libs</code></p>
<p>Android Studio:
<pre>
frameworks/cocos2d-x/cocos/platform/android/java/libs
frameworks/cocos2d-x/cocos/platform/android/libcocos2dx/libs
</pre></p>
</li>
<li>
<p>If you're using prebuilt cocos2d-x copy the <strong>jar</strong> files to:</p>
<p>Android command-line:
<code>proj.android/libs</code></p>
</li>
</ul>
<h4 id="copy-jni-libs">Copy jni libs</h4>
<p>Copy and overwrite all the folders from <code>plugin/android/jni</code>
to your <code>&lt;project_root&gt;/jni/</code> directory.</p>
<h3 id="edit-androidmanifestxml">Edit <code>AndroidManifest.xml</code></h3>
<p>Include the following permissions above the <strong>application tag</strong>:</p>
<pre><code class="xml">&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot; /&gt;
</code></pre>

<p>To enable <strong>hardware acceleration</strong> in your <strong>application tag</strong>. This tag is
optional on newer SDK versions and doesn't work on version 2.3.3.</p>
<pre><code class="xml">&lt;android:hardwareAccelerated=&quot;true&quot; /&gt;
</code></pre>

<p>Copy and paste the following three activity definitions just before the end of the <strong>application tags</strong>, near the bottom.</p>
<pre><code class="xml">&lt;activity android:name=&quot;com.jirbo.adcolony.AdColonyOverlay&quot;
      android:configChanges=&quot;keyboardHidden|orientation&quot;
      android:theme=&quot;@android:style/Theme.Translucent.NoTitleBar.Fullscreen&quot; /&gt;
&lt;activity android:name=&quot;com.jirbo.adcolony.AdColonyFullscreen&quot;
      android:configChanges=&quot;keyboardHidden|orientation&quot;
      android:theme=&quot;@android:style/Theme.Black.NoTitleBar.Fullscreen&quot; /&gt;
&lt;activity android:name=&quot;com.jirbo.adcolony.AdColonyBrowser&quot;
      android:configChanges=&quot;keyboardHidden|orientation&quot;
      android:theme=&quot;@android:style/Theme.Black.NoTitleBar.Fullscreen&quot; /&gt;
</code></pre>

<p><strong>Note:</strong> if your application targets below <strong>API 13</strong>, you will likely need to remove <code>screenSize</code> from the <strong>configChanges</strong> property of the above <strong>activity tags</strong>.</p>
<h3 id="edit-androidmk">Edit <code>Android.mk</code></h3>
<p>Edit <code>&lt;project_root&gt;/jni/Android.mk</code> to:</p>
<p>Add additional requirements to <strong>LOCAL_WHOLE_STATIC_LIBRARIES</strong>:</p>
<pre><code>LOCAL_WHOLE_STATIC_LIBRARIES += PluginAdColony
LOCAL_WHOLE_STATIC_LIBRARIES += sdkbox
</code></pre>

<p>Add a call to:</p>
<pre><code>$(call import-add-path,$(LOCAL_PATH))
</code></pre>

<p>before any <strong>import-module</strong> statements.</p>
<p>Add additional <strong>import-module</strong> statements at the end:</p>
<pre><code>$(call import-module, ./sdkbox)
$(call import-module, ./pluginadcolony)
</code></pre>

<p>This means that your ordering should look similar to this:</p>
<pre><code>$(call import-add-path,$(LOCAL_PATH))
$(call import-module, ./sdkbox)
$(call import-module, ./pluginadcolony)
</code></pre>

<p><strong>Note:</strong> It is important to make sure these statements are above the existing <code>$(call import-module,./prebuilt-mk)</code> statement, if you are using the pre-built libraries.</p>
<h3 id="modify-applicationmk-cocos2d-x-v30-to-v32-only">Modify <code>Application.mk</code> (Cocos2d-x v3.0 to v3.2 only)</h3>
<p>Edit <code>&lt;project_root&gt;/jni/Application.mk</code> to make sure <strong>APP_STL</strong> is defined
correctly. If <code>Application.mk</code> contains <code>APP_STL := c++_static</code>, it should be
changed to:</p>
<pre><code>APP_STL := gnustl_static
</code></pre>

<p>Copy all source and header files from <code>plugin/jsbindings/</code> to your projects <code>Classes</code> folder.</p>
<p><strong>NOTE</strong>: <code>plugin/jsbindings/jsb2</code> for creator 1.7.</p>
<p>Add all <code>.cpp</code> files, that you just copied, to <code>Android.mk</code> in the <strong>LOCAL_SRC_FILES</strong> section. Example</p>
<pre><code>LOCAL_SRC_FILES := hellocpp/main.cpp \
                  ../../Classes/AppDelegate.cpp \
                  ../../Classes/HelloWorldScene.cpp \
                                    ../../Classes/NewSourceFile.cpp
</code></pre>

<h3 id="modify-appactivityjava">Modify <strong>AppActivity.java</strong></h3>
<h4 id="plugin-2403">Plugin &gt;= 2.4.0.3</h4>
<ol>
<li>Find the <strong>AppActivity.java</strong></li>
</ol>
<pre><code class="bash">find . -name &quot;AppActivity.java&quot;
</code></pre>

<ol>
<li>Replace <code>extends Cocos2dxActivity</code> with <code>extends com.sdkbox.plugin.SDKBoxActivity</code></li>
</ol>
<p>Example of the directory where the <strong>AppActivity.java</strong> file is located:</p>
<pre><code>cpp
  - proj.android/src/org/cocos2dx/cpp/AppActivity.java
  - proj.android-studio/app/src/org/cocos2dx/cpp/AppActivity.java
  - proj.android/app/src/org/cocos2dx/cpp/AppActivity.java ( from cocos2d-x 3.17)

lua
  - frameworks/runtime-src/proj.android/src/org/cocos2dx/lua/AppActivity.java
  - frameworks/runtime-src/proj.android-studio/app/src/org/cocos2dx/lua/AppActivity.java
  - frameworks/runtime-src/proj.android/app/src/org/cocos2dx/lua/AppActivity.java (from cocos2d-x 3.17)

js
  - frameworks/runtime-src/proj.android/src/org/cocos2dx/javascript/AppActivity.java
  - frameworks/runtime-src/proj.android/app/src/org/cocos2dx/javascript/AppActivity.java ( from cocos2d-x 3.17)
</code></pre>

<h4 id="plugin-2403_1">Plugin &lt; 2.4.0.3</h4>
<ul>
<li>
<p>If you're using cocos2d-x from source, assuming you are in the <strong>proj.android</strong> directory, <strong>Cocos2dxActivity.java</strong> is located:</p>
<p><code>../../cocos2d-x/cocos/platform/android/java/src/org/cocos2dx/
lib/Cocos2dxActivity.java</code></p>
</li>
<li>
<p>If you're using the prebuilt cocos2d-x libraries assuming you are in the <code>proj.android</code> directory, <strong>Cocos2dxActivity.java</strong> is located:</p>
<p><code>./src/org/cocos2dx/lib/Cocos2dxActivity.java</code></p>
</li>
</ul>
<p><strong>Note:</strong> When using Cocos2d-x from source, different versions have <strong>Cocos2dxActivity.java</strong> in a different location. One way to find the location is to look in <strong>proj.android/project.properties</strong>. Example:
  <code>android.library.reference.1=../../cocos2d-x/cocos/platform/android/java</code></p>
<p>In this case, <strong>Cocos2dxActivity.java</strong> should be located at:</p>
<pre><code>../../cocos2d-x/cocos/platform/android/java/src/org/cocos2dx/lib/Cocos2dxActivity.java
</code></pre>

<ul>
<li>Modify <strong>Cocos2dxActivity.java</strong> to add the following imports:</li>
</ul>
<pre><code class="java">import android.content.Intent;
import com.sdkbox.plugin.SDKBox;
</code></pre>

<ul>
<li>Second, modify <strong>Cocos2dxActivity.java</strong> to edit the <code>onCreate(final Bundle savedInstanceState)</code> function to add a call to <code>SDKBox.init(this);</code>. The placement of this call is important. It must be done after the call to <code>onLoadNativeLibraries();</code>. Example:</li>
</ul>
<pre><code class="java">onLoadNativeLibraries();
SDKBox.init(this);
</code></pre>

<ul>
<li>
<p>Last, we need to insert the proper <strong>overrides</strong> code. There are a few rules here.</p>
<ul>
<li>
<p>If the method listed has not been defined, <strong>add it</strong>.</p>
</li>
<li>
<p>If the method listed has been defined, add the calls to <code>SDKBox</code> in the <strong>same</strong> existing function.</p>
</li>
</ul>
</li>
</ul>
<pre><code class="java">    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
          if(!SDKBox.onActivityResult(requestCode, resultCode, data)) {
            super.onActivityResult(requestCode, resultCode, data);
          }
    }
    @Override
    protected void onStart() {
          super.onStart();
          SDKBox.onStart();
    }
    @Override
    protected void onStop() {
          super.onStop();
          SDKBox.onStop();
    }
    @Override
    protected void onResume() {
          super.onResume();
          SDKBox.onResume();
    }
    @Override
    protected void onPause() {
          super.onPause();
          SDKBox.onPause();
    }
    @Override
    public void onBackPressed() {
          if(!SDKBox.onBackPressed()) {
            super.onBackPressed();
          }
    }
</code></pre>

<h2 id="proguard-optional">Proguard (optional)</h2>
<ul>
<li>Edit <code>project.properties</code>  to specify a <code>Proguard</code> configuration file. Example:</li>
</ul>
<pre><code>proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt
</code></pre>

<ul>
<li>Edit the file you specified to include the following:</li>
</ul>
<pre><code># adcolony
-dontwarn android.webkit.**

-dontwarn com.jirbo.adcolony.**
-keep public class com.jirbo.adcolony.** { public *; }


# cocos2d-x
-keep public class org.cocos2dx.** { *; }
-dontwarn org.cocos2dx.**
-keep public class com.chukong.** { *; }
-dontwarn com.chukong.**

# google play service
-keep public class com.google.android.gms.** { public *; }
-dontwarn com.google.android.gms.**

-keep class com.google.protobuf.** { *; }
-dontwarn com.google.protobuf.**

-keep class * extends java.util.ListResourceBundle {
    protected Object[][] getContents();
}

-keep public class com.google.android.gms.common.internal.safeparcel.SafeParcelable {
    public static final *** NULL;
}

-keepnames @com.google.android.gms.common.annotation.KeepName class *
-keepclassmembernames class * {
    @com.google.android.gms.common.annotation.KeepName *;
}

-keepnames class * implements android.os.Parcelable {
    public static final ** CREATOR;
}

#sdkbox
-keep public class com.sdkbox.** { *; }
-dontwarn com.sdkbox.**
</code></pre>

<p><strong>Note:</strong> Proguard only works with <strong>Release</strong> builds (i.e <code>cocos run -m release</code>) debug builds do not invoke Proguard rules.</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Build Date UTC :2020-12-07 02:06:00.156334, Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        
        <script src="../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script>var base_url = '../../..';</script>
        <script src="../../../js/base.js"></script>
        


        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-70044300-2', 'auto');
            ga('send', 'pageview');
        </script>
        
    </body>
</html>
