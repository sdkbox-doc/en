<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">

	<title>Appnext with Lua - SDKBOX</title>
        
        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../../css/base.css?2" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">
        <link href="../../../css/custom.css" rel="stylesheet">
        

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="http://sdkbox.com"><img src="http://www.cocos2d-x.org/s/sdkbox/SDKBOX_logo.png">Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">

            <ul class="nav navbar-nav navbar-right">


            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../..">Overview</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cocos2d-x <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../cocos/">Overview</a>
</li>

                        
                            
<li >
    <a href="../../../installer/">CLI Installer</a>
</li>

                        
                            
<li >
    <a href="../../../qa/cocos_creator/">For Cocos Creator</a>
</li>

                        
                            
  
  <li class="dropdown-submenu">
    <a tabindex="-1" class="non-link">Plugins</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../achievement/">Achievements</a>
</li>

        
            
  

        
            
<li >
    <a href="../../adcolony/">AdColony</a>
</li>

        
            
  

        
            
<li >
    <a href="../../admob/">AdMob</a>
</li>

        
            
  

        
            
<li >
    <a href="../../agecheq/">AgeCheq</a>
</li>

        
            
  

        
            
<li >
    <a href="../">Appnext</a>
</li>

        
            
  

        
            
<li >
    <a href="../../appodeal/">Appodeal</a>
</li>

        
            
  

        
            
<li >
    <a href="../../amazon/">Amazon</a>
</li>

        
            
  

        
            
<li >
    <a href="../../apteligent/">Apteligent</a>
</li>

        
            
  

        
            
<li >
    <a href="../../bee7/">Bee7</a>
</li>

        
            
  

        
            
<li >
    <a href="../../chartboost/">Chartboost</a>
</li>

        
            
  

        
            
<li >
    <a href="../../ethwallet/">EthWallet</a>
</li>

        
            
<li >
    <a href="../../facebook/">Facebook</a>
</li>

        
            
  

        
            
<li >
    <a href="../../gameroom/">Facebook Gameroom</a>
</li>

        
            
  

        
            
<li >
    <a href="../../firebase/">Firebase</a>
</li>

        
            
  

        
            
<li >
    <a href="../../flurryanalytics/">Flurry Analytics</a>
</li>

        
            
  

        
            
<li >
    <a href="../../fyber/">Fyber</a>
</li>

        
            
  

        
            
<li >
    <a href="../../googleanalytics/">Google Analytics</a>
</li>

        
            
  

        
            
<li >
    <a href="../../googleplay/">Google Play Games</a>
</li>

        
            
  

        
            
<li >
    <a href="../../iap/">In-App Purchase</a>
</li>

        
            
  

        
            
<li >
    <a href="../../inmobi/">InMobi</a>
</li>

        
            
  

        
            
<li >
    <a href="../../kochava/">Kochava</a>
</li>

        
            
  

        
            
<li >
    <a href="../../leadbolt/">LeadBolt</a>
</li>

        
            
  

        
            
<li >
    <a href="../../leaderboard/">Leaderboard</a>
</li>

        
            
  

        
            
<li >
    <a href="../../misc/">Misc</a>
</li>

        
            
  

        
            
<li >
    <a href="../../onesignal/">OneSignal</a>
</li>

        
            
  

        
            
<li >
    <a href="../../playphone/">Playphone</a>
</li>

        
            
  

        
            
<li >
    <a href="../../phunwareads/">Phunware Ads</a>
</li>

        
            
  

        
            
<li >
    <a href="../../phunwaremessaging/">Phunware Messaging</a>
</li>

        
            
  

        
            
<li >
    <a href="../../review/">Ratings & Reviews</a>
</li>

        
            
  

        
            
<li >
    <a href="../../sdkboxads/">SDKBOX Ads</a>
</li>

        
            
  

        
            
<li >
    <a href="../../sdkboxplay/">SDKBOX Play</a>
</li>

        
            
  

        
            
<li >
    <a href="../../share/">Social Sharing</a>
</li>

        
            
  

        
            
<li >
    <a href="../../tapcore/">Tapcore</a>
</li>

        
            
  

        
            
<li >
    <a href="../../tune/">Tune</a>
</li>

        
            
  

        
            
<li >
    <a href="../../unityads/">UnityAds</a>
</li>

        
            
  

        
            
<li >
    <a href="../../valuepotion/">Valuepotion</a>
</li>

        
            
  

        
            
<li >
    <a href="../../vungle/">Vungle</a>
</li>

        
            
  

        
            
<li >
    <a href="../../youtube/">Youtube</a>
</li>

        
            
  

        
    </ul>
  </li>
  

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Unity <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../unity/allinone/">SDKBOX AllInOne</a>
</li>

                        
                            
<li >
    <a href="../../../unity/iap/">In-App Purchase</a>
</li>

                        
                            
<li >
    <a href="../../../unity/review/">Ratings & Reviews</a>
</li>

                        
                            
<li >
    <a href="../../../unity/socialshare/">SocialShare</a>
</li>

                        
                            
<li >
    <a href="../../../unity/googleanalytics/">Google Analytics</a>
</li>

                        
                            
<li >
    <a href="../../../unity/sdkboxplay/">SDKBOX Play</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Unreal <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../unreal/iap/">In-App Purchase</a>
</li>

                        
                            
<li >
    <a href="../../../unreal/chartboost/">Chartboost</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">LiveOps <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../liveops/">Setup</a>
</li>

                        
                            
<li >
    <a href="../../../liveops/remote-config/">Remote Configuration</a>
</li>

                        
                            
<li >
    <a href="../../../liveops/receipt-verification/">Server-side IAP receipt verification</a>
</li>

                        
                            
<li >
    <a href="../../../liveops/catalog-management/">On-the-fly catalog management</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../qa/from-google-to-amazon/">From Google to Amazon</a>
</li>

                        
                            
<li >
    <a href="../../../qa/integration-admob-to-creator/">Admob in Creator</a>
</li>

                        
                            
<li >
    <a href="../../../qa/integration-fyber-to-cocos/">Fyber with Cocos2d-x</a>
</li>

                        
                            
<li >
    <a href="../../../qa/fb-share-on-cocos/">Facebook with Cocos2d-x</a>
</li>

                        
                            
<li >
    <a href="../../../qa/android_64k/">Fix Android 64K methods limit</a>
</li>

                        
                            
<li >
    <a href="../../../qa/integration-iap-on-unity/">IAP with Unity</a>
</li>

                        
                            
<li >
    <a href="../../../qa/use-gui-integration-ga-to-creator/">GA with SDKBox GUI in Creator</a>
</li>

                        
                            
<li >
    <a href="../../../qa/use-custom-activity-on-unity/">Unity Custom Activity</a>
</li>

                        
                            
<li >
    <a href="../../../qa/crypt-sdkbox-config/">Encrypt Decrypt sdkbox_config.json</a>
</li>

                        
                            
<li >
    <a href="../../../qa/sdkboxplay_troubleshoot/">SDKBoxPlay Troubleshoot</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../../release-note/">About</a>
                    </li>
                
                

                <li style="margin-left:30px">
                    <a href="http://sdkbox-doc.github.io/zh/">中文</a>
                </li>
                
                </ul>
            




            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#integration">Integration</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#account-registration">Account Registration</a></li>
        
            <li><a href="#plugin-integration">Plugin Integration</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#extra-steps">Extra steps</a></li>
	
    
        <li class="main "><a href="#important-notice">Important Notice</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#disable-app-transport-security">Disable App Transport Security</a></li>
        
            <li><a href="#disable-bitcode-support">Disable Bitcode support</a></li>
        
            <li><a href="#set-your-game-requires-full-screen">Set your game requires full screen</a></li>
        
            <li><a href="#whitelist-canopenurl-function">Whitelist canOpenURL function</a></li>
        
            <li><a href="#json-configuration">JSON Configuration</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#usage">Usage</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#initialize-appnext">Initialize Appnext</a></li>
        
            <li><a href="#cache-advideo">cache ad/video</a></li>
        
            <li><a href="#refresh-advideo">refresh ad/video</a></li>
        
            <li><a href="#show-advideo">show ad/video</a></li>
        
            <li><a href="#hide-ad">hide ad</a></li>
        
            <li><a href="#check-advideo-available">check ad/video available</a></li>
        
            <li><a href="#implement-appnextlistner">Implement AppnextListner</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#api-reference">API Reference</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#methods">Methods</a></li>
        
            <li><a href="#listeners">Listeners</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#manual-integration">Manual Integration</a></li>
	
    
        <li class="main "><a href="#manual-integration-for-ios">Manual Integration For iOS</a></li>
	
    
        <li class="main "><a href="#manual-integration-for-android">Manual Integration For Android</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#copy-files">Copy Files</a></li>
        
            <li><a href="#edit-androidmanifestxml">Edit AndroidManifest.xml</a></li>
        
            <li><a href="#edit-androidmk">Edit Android.mk</a></li>
        
            <li><a href="#modify-applicationmk-cocos2d-x-v30-to-v32-only">Modify Application.mk (Cocos2d-x v3.0 to v3.2 only)</a></li>
        
            <li><a href="#modify-appactivityjava">Modify AppActivity.java</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#manual-integration-for-google-play-services-sdk-dependent-library-only">Manual Integration for Google Play Services SDK (dependent library only)</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#suggestion">Suggestion</a></li>
        
            <li><a href="#modify-projectproperties">Modify project.properties</a></li>
        
            <li><a href="#integration-manually">Integration manually</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#proguard-optional">Proguard (optional)</a></li>
	
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p><a href="../">&#8249; Appnext Doc Home</a></p>
<h1>Appnext Integration Guide</h1>

<h4><em><b>For the Lua version of cocos2d-x v3.x</b> - (<a href="./../">all other versions</a>)</em></h4>

<h2 id="integration">Integration</h2>
<h3 id="account-registration">Account Registration</h3>
<p>you must sign up for <a href="https://www.appnext.com/">Appnext</a> and setup your app. make sure you have following items before proceeding to SDK integration</p>
<p><strong>Appnext Account &amp; ID</strong></p>
<p>You must register for an Appnext Account in order to integrate the Appnext plugin.
Log in to your Appnext account. If you do not have an Appnext account, copy the following URL to the browser: https://www.appnext.com and sign up.</p>
<p><strong>Placement ID</strong></p>
<p>A unique ID called a "Placement ID" is required for all inbound requests. A Placement ID is a 32-character
string generated by Appnext for every registered app.</p>
<p><strong>Get a Unique ID</strong></p>
<p>To get started - add a new App via the Appnext Self-Service Platform, then copy the Placement ID, which
can be found in your account at: Apps -&gt; Settings Icon-&gt; Settings &amp; Placements -&gt; Placement ID
If you plan to show ads for both iOS and Android users, you will need to add a separate App for Android
and a separate App for iOS and copy the Placement ID of each app.</p>
<h3 id="plugin-integration">Plugin Integration</h3>
<p>Open a terminal and use the following command to install the SDKBOX Appnext plugin.</p>
<pre><code class="bash">$ sdkbox import appnext
</code></pre>

<h2 id="extra-steps">Extra steps</h2>
<ol>
<li>For portrait iOS games with landscape video ad:</li>
</ol>
<p>1.1 Edit <code>RootViewController.mm</code> file</p>
<pre><code>```
// For ios6, use supportedInterfaceOrientations &amp; shouldAutorotate instead
- (NSUInteger) supportedInterfaceOrientations{
#ifdef __IPHONE_6_0
    return UIInterfaceOrientationMaskPortrait; // only portrait here
#endif
}
- (BOOL) shouldAutorotate {
    return YES;
}
```
</code></pre>
<p>1.2 Add Landscape orientations support</p>
<p>For Full-Screen/Rewarded Ad: Landscape orientations (Landscape left/Landscape Right).
Click on your project in the 'Project navigator'-&gt;'General'-&gt;'Device Orientation' and add the
required orientations for both iPhone/iPad devices.</p>
<p>1.3 set <code>"orientation":"landscape"</code> in <code>sdkbox_config.json</code></p>
<h2 id="important-notice">Important Notice</h2>
<p>Please make sure the following settings in your project to make the plugin work well.</p>
<h4 id="disable-app-transport-security">Disable App Transport Security</h4>
<p>Adding the following entry to the <code>info.plist</code> file:</p>
<pre><code>&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;
&lt;dict&gt;
    &lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;
    &lt;true/&gt;
&lt;/dict&gt;
</code></pre>

<p>It should look like this:</p>
<p><img alt="" src="../../../imgs/ATS.png" /></p>
<h4 id="disable-bitcode-support">Disable Bitcode support</h4>
<p>You have to turn off <strong>Bitcode</strong> support. If you don't, cocos2d-x will fail to build.</p>
<h4 id="set-your-game-requires-full-screen">Set your game requires full screen</h4>
<p>If your game doesn't support all screen orientations, you will need to check <code>Requires full screen</code> in Xcode. If you do not, your app will fail Apple's submission process.</p>
<h4 id="whitelist-canopenurl-function">Whitelist canOpenURL function</h4>
<p>This setting depends on what plugins are in your project. You may need to add the required entry to the <code>info.plist</code>, under <code>LSApplicationQueriesSchemes</code>.</p>
<!--## Configuration

## Remote Configuration

Optionally, you can choose to use SDKBOX LiveOps to remotely update this plugin's configuration. [Learn more](/liveops/remote-config)-->

<h3 id="json-configuration">JSON Configuration</h3>
<p>SDKBOX Installer will automatically inject a sample configuration to your <code>sdkbox_config.json</code>, that you have to modify it before you can use it for your own app</p>
<ul>
<li>
<p>id</p>
</li>
<li>
<p>type: [string]</p>
<ul>
<li>"interstitial"</li>
<li>"fullscreen"</li>
<li>"reward"</li>
</ul>
</li>
</ul>
<h4 id="options">options</h4>
<ul>
<li>
<p>creative_type:</p>
<ul>
<li>"managed"</li>
<li>"video"</li>
<li>"static"</li>
</ul>
</li>
<li>
<p>progress_type:</p>
<ul>
<li>"clock"</li>
<li>"bar"</li>
<li>"none"</li>
</ul>
</li>
<li>
<p>video_lenght:</p>
<ul>
<li>"short"</li>
<li>"long"</li>
</ul>
</li>
<li>
<p>button_text</p>
</li>
<li>button_color</li>
<li>categories</li>
<li>postback</li>
<li>
<p>can_close</p>
</li>
<li>
<p>skip_text</p>
</li>
<li>mute</li>
<li>
<p>autoplay</p>
</li>
<li>
<p>progress_color: [string]</p>
</li>
<li>show_close_button: [bool]</li>
<li>close_delay: [float]</li>
<li>
<p>orientation: [string]</p>
<ul>
<li>"automatic"</li>
<li>"landscape"</li>
<li>"portrait"</li>
<li>"not_set"</li>
</ul>
</li>
</ul>
<p>more information:</p>
<ul>
<li><a href="https://selfservice.appnext.com/Apps/Tools.aspx#android/interstitial-sdk/native-app/advanced_settings">https://selfservice.appnext.com/Apps/Tools.aspx#android/interstitial-sdk/native-app/advanced_settings</a></li>
<li><a href="https://selfservice.appnext.com/Apps/Tools.aspx#android/full-screen/rewarded-sdk-beta/advanced_settings">https://selfservice.appnext.com/Apps/Tools.aspx#android/full-screen/rewarded-sdk-beta/advanced_settings</a></li>
<li><a href="https://selfservice.appnext.com/Apps/Tools.aspx#android/full-screen/rewarded-sdk-beta/app_categories">https://selfservice.appnext.com/Apps/Tools.aspx#android/full-screen/rewarded-sdk-beta/app_categories</a></li>
</ul>
<p>Example:</p>
<pre><code class="json">
{
    &quot;ios&quot;: {
        &quot;Appnext&quot;:{
            &quot;debug&quot;:true,
            &quot;ads&quot;: {
                &quot;default&quot;: {
                    // Please replace this placement id with your own placement id from appnext
                    &quot;id&quot;:&quot;please_replace_with_your_placement_id&quot;,
                    &quot;type&quot;:&quot;interstitial&quot;,

                    &quot;button_text&quot;:&quot;Button Text&quot;,
                    &quot;button_color&quot;:&quot;#6AB344&quot;,
                    &quot;categories&quot;:&quot;Action,Puzzle&quot;,
                    &quot;postback&quot;:&quot;postback&quot;,

                    &quot;skip_text&quot;:&quot;Skip Text&quot;,
                    &quot;mute&quot;:false,
                    &quot;autoplay&quot;:true,
                    &quot;creative_type&quot;:&quot;managed&quot;
                },
                &quot;fullscreen&quot;: {
                    // Please replace this placement id with your own placement id from appnext
                    &quot;id&quot;:&quot;please_replace_with_your_placement_id&quot;,
                    &quot;type&quot;:&quot;fullscreen&quot;,

                    &quot;button_text&quot;:&quot;Button Text&quot;,
                    &quot;button_color&quot;:&quot;#6AB344&quot;,
                    &quot;categories&quot;:&quot;Action,Puzzle&quot;,
                    &quot;postback&quot;:&quot;postback&quot;,

                    &quot;progress_type&quot;:&quot;clock&quot;,
                    &quot;progress_color&quot;:&quot;#ffffff&quot;,
                    &quot;show_close_button&quot;:true,
                    &quot;video_lenght&quot;:&quot;short&quot;,
                    &quot;close_delay&quot;:5.0,
                    &quot;orientation&quot;:&quot;automatic&quot;
                },
                &quot;reward&quot;: {
                    // Please replace this placement id with your own placement id from appnext
                    &quot;id&quot;:&quot;please_replace_with_your_placement_id&quot;,
                    &quot;type&quot;:&quot;reward&quot;,

                    &quot;button_text&quot;:&quot;Button Text&quot;,
                    &quot;button_color&quot;:&quot;#6AB344&quot;,
                    &quot;categories&quot;:&quot;Action,Puzzle&quot;,
                    &quot;postback&quot;:&quot;postback&quot;,

                    &quot;progress_type&quot;:&quot;bar&quot;,
                    &quot;progress_color&quot;:&quot;#ffff00&quot;,
                    &quot;show_close_button&quot;:true,
                    &quot;video_lenght&quot;:&quot;long&quot;,
                    &quot;close_delay&quot;:5.0,
                    &quot;orientation&quot;:&quot;automatic&quot;
                }
            }
        }
    },
    &quot;android&quot;: {
        &quot;Appnext&quot;:{
            &quot;debug&quot;:true,
            &quot;ads&quot;: {
                &quot;default&quot;: {
                    // Please replace this placement id with your own placement id from appnext
                    &quot;id&quot;:&quot;please_replace_with_your_placement_id&quot;,
                    &quot;type&quot;:&quot;interstitial&quot;,

                    &quot;button_text&quot;:&quot;Button Text&quot;,
                    &quot;button_color&quot;:&quot;#6AB344&quot;,
                    &quot;categories&quot;:&quot;Action,Puzzle&quot;,
                    &quot;postback&quot;:&quot;postback&quot;,
                    &quot;can_close&quot;:false,

                    &quot;skip_text&quot;:&quot;Skip Text&quot;,
                    &quot;mute&quot;:false,
                    &quot;autoplay&quot;:true,
                    &quot;creative_type&quot;:&quot;managed&quot;
                },
                &quot;fullscreen&quot;: {
                    // Please replace this placement id with your own placement id from appnext
                    &quot;id&quot;:&quot;please_replace_with_your_placement_id&quot;,
                    &quot;type&quot;: &quot;fullscreen&quot;,

                    &quot;button_text&quot;:&quot;Button Text&quot;,
                    &quot;button_color&quot;:&quot;#6AB344&quot;,
                    &quot;categories&quot;:&quot;Action,Puzzle&quot;,
                    &quot;postback&quot;:&quot;postback&quot;,
                    &quot;can_close&quot;:false,

                    &quot;progress_type&quot;:&quot;clock&quot;,
                    &quot;progress_color&quot;:&quot;#ffffff&quot;,
                    &quot;show_close_button&quot;:true,
                    &quot;video_lenght&quot;:&quot;short&quot;,
                    &quot;orientation&quot;:&quot;automatic&quot;
                },
                &quot;reward&quot;: {
                    // Please replace this placement id with your own placement id from appnext
                    &quot;id&quot;:&quot;please_replace_with_your_placement_id&quot;,
                    &quot;type&quot;: &quot;reward&quot;,

                    &quot;button_text&quot;:&quot;Button Text&quot;,
                    &quot;button_color&quot;:&quot;#6AB344&quot;,
                    &quot;categories&quot;:&quot;Action,Puzzle&quot;,
                    &quot;postback&quot;:&quot;postback&quot;,
                    &quot;can_close&quot;:false,

                    &quot;progress_type&quot;:&quot;bar&quot;,
                    &quot;progress_color&quot;:&quot;#ffff00&quot;,
                    &quot;show_close_button&quot;:false,
                    &quot;video_lenght&quot;:&quot;long&quot;,
                    &quot;orientation&quot;:&quot;automatic&quot;
                }
            }
        }
    }
}

</code></pre>

<h2 id="usage">Usage</h2>
<h3 id="initialize-appnext">Initialize Appnext</h3>
<ul>
<li>modify your Lua code to <code>init()</code> the plugin. This can be done anyplace, however it must be done before trying to use the plugin's features.</li>
</ul>
<pre><code class="lua">sdkbox.PluginAppnext:init()
</code></pre>

<h3 id="cache-advideo">cache ad/video</h3>
<pre><code class="cpp">sdkbox.PluginAppnext:cacheAd(&quot;default&quot;)
sdkbox.PluginAppnext:cacheVideo(&quot;fullscreen&quot;)
</code></pre>

<p><strong>NOTE</strong> : Appnext ads needs to be cached before use, auto-caching is not available with this plugin. It might take couple of minutes to cache ads, once cached you would be able to see the ads. While caching, ads are not available.</p>
<h3 id="refresh-advideo">refresh ad/video</h3>
<pre><code>sdkbox.PluginAppnext:refreshAds()
sdkbox.PluginAppnext:refreshVideo(&quot;fullscreen&quot;)
</code></pre>

<p><strong>NOTE</strong> : refresh ad or video after it is closed.</p>
<h3 id="show-advideo">show ad/video</h3>
<pre><code class="cpp">sdkbox.PluginAppnext:showAd(&quot;default&quot;)
sdkbox.PluginAppnext:showVideo(&quot;fullscreen&quot;)
</code></pre>

<h3 id="hide-ad">hide ad</h3>
<pre><code class="cpp">sdkbox.PluginAppnext:hideAd()
</code></pre>

<h3 id="check-advideo-available">check ad/video available</h3>
<pre><code class="cpp">sdkbox.PluginAppnext:isAdReady()
sdkbox.PluginAppnext:isVideoReady(&quot;fullscreen&quot;)
</code></pre>

<h3 id="implement-appnextlistner">Implement AppnextListner</h3>
<ul>
<li>You can implement AppnextListener if you want to receive callbacks like video finish playing.</li>
</ul>
<pre><code class="lua">
sdkbox.PluginAppnext.setListener(function(args)
    local event = args.event
    if &quot;onAdError&quot; == event then
    elif &quot;onAdLoaded&quot; == event then
    elif &quot;onAdOpened&quot; == event then -- not support on android
    elif &quot;onAdClosed&quot; == event then
    elif &quot;onAdClicked&quot; == event then

    elif &quot;onVideoLoaded&quot; == event then
    elif &quot;onVideoClicked&quot; == event then
    elif &quot;onVideoClosed&quot; == event then
    elif &quot;onVideoEnded&quot; == event then   -- not support on ios
    elif &quot;onVideoError&quot; == event then
    end
end)

</code></pre>

<h2 id="api-reference">API Reference</h2>
<h3 id="methods">Methods</h3>
<pre><code class="lua">sdkbox.PluginAppnext:init()
</code></pre>

<blockquote>
<p>initialize the plugin instance.</p>
</blockquote>
<pre><code class="lua">sdkbox.PluginAppnext:setListener(listener)
</code></pre>

<blockquote>
<p>Set listener to listen for appnext events</p>
</blockquote>
<pre><code class="lua">sdkbox.PluginAppnext:hideAd()
</code></pre>

<blockquote>
<p>Hide advertisement</p>
</blockquote>
<pre><code class="lua">sdkbox.PluginAppnext:showAd()
</code></pre>

<blockquote>
<p>Show advertisement</p>
</blockquote>
<pre><code class="lua">sdkbox.PluginAppnext:refreshAds()
</code></pre>

<blockquote>
<p>Refresh advertisement</p>
</blockquote>
<pre><code class="lua">sdkbox.PluginAppnext:cacheAd(name)
</code></pre>

<blockquote>
<p>Cache advertisement</p>
</blockquote>
<pre><code class="lua">sdkbox.PluginAppnext:isAdReady()
</code></pre>

<blockquote>
<p>Check if advertisement is ready</p>
</blockquote>
<pre><code class="lua">sdkbox.PluginAppnext:cacheVideo(name)
</code></pre>

<blockquote>
<p>Cache video with @name</p>
</blockquote>
<pre><code class="lua">sdkbox.PluginAppnext:showVideo(name)
</code></pre>

<blockquote>
<p>show video with @name</p>
</blockquote>
<pre><code class="lua">sdkbox.PluginAppnext:refreshVideo(name)
</code></pre>

<blockquote>
<p>Refresh video with @name</p>
</blockquote>
<pre><code class="lua">sdkbox.PluginAppnext:isVideoReady(name)
</code></pre>

<blockquote>
<p>Check if video is ready with @name</p>
</blockquote>
<pre><code class="lua">sdkbox.PluginAppnext:setRewardsTransactionId(transactionId)
</code></pre>

<blockquote>
<p>Set reward video transaction id</p>
</blockquote>
<pre><code class="lua">sdkbox.PluginAppnext:setRewardsUserId(userId)
</code></pre>

<blockquote>
<p>Set reward video user id</p>
</blockquote>
<pre><code class="lua">sdkbox.PluginAppnext:setRewardsRewardTypeCurrency(currency)
</code></pre>

<blockquote>
<p>Set type of reward, such as life / credit / points.</p>
</blockquote>
<pre><code class="lua">sdkbox.PluginAppnext:setRewardsAmountRewarded(amount)
</code></pre>

<blockquote>
<p>Set the amount of currency that was rewarded.</p>
</blockquote>
<pre><code class="lua">sdkbox.PluginAppnext:setRewardsCustomParameter(parameter)
</code></pre>

<blockquote>
<p>Set reward video custom parameter.</p>
</blockquote>
<h3 id="listeners">Listeners</h3>
<pre><code class="lua">onAdError(msg)
</code></pre>

<pre><code class="lua">onAdLoaded()
</code></pre>

<pre><code class="lua">onAdOpened()
</code></pre>

<pre><code class="lua">onAdClosed()
</code></pre>

<pre><code class="lua">onAdClicked()
</code></pre>

<pre><code class="lua">onVideoLoaded(name)
</code></pre>

<pre><code class="lua">onVideoClicked(name)
</code></pre>

<pre><code class="lua">onVideoClosed(name)
</code></pre>

<pre><code class="lua">onVideoEnded(name)
</code></pre>

<pre><code class="lua">onVideoError(name, msg)
</code></pre>

<h2 id="manual-integration">Manual Integration</h2>
<p>If the <em>SDKBOX Installer</em> <strong>fails</strong> to complete successfully, it is possible to integrate SDKBOX manually. If the installer complete successfully, please <strong>do not</strong> complete anymore of this document. It is not necessary.</p>
<p>These steps are listed last in this document on purpose as they are seldom needed. If you find yourself using these steps, please, after completing, double back and re-read the steps above for other integration items.</p>
<h2 id="manual-integration-for-ios">Manual Integration For iOS</h2>
<p>Drag and drop the following frameworks from the <strong>plugins/ios</strong> folder of the <code>Appnext</code> bundle into your Xcode project, check <code>Copy items if needed</code> when
adding frameworks:</p>
<blockquote>
<p>sdkbox.framework</p>
<p>PluginAppnext.framework</p>
</blockquote>
<p>You also need to add the following system frameworks, if you don't already have them:</p>
<blockquote>
<p>AdSupport.framework</p>
<p>SystemConfiguration.framework</p>
</blockquote>
<p>Copy all source and header files from <code>plugin/luabindings/</code> to your projects <code>Classes</code> folder.</p>
<p>Add these same files, that you just copied, to Xcode by either dragging and dropping them into Xcode or by using <strong>File -&gt; Add files to...</strong>.</p>
<h2 id="manual-integration-for-android">Manual Integration For Android</h2>
<p>SDKBOX supports three different kinds of <strong>Android</strong> projects <strong>command-line</strong>, <strong>eclipse</strong> and <strong>Android Studio</strong>. </p>
<ul>
<li><code>proj.android</code> will be used as our <code>&lt;project_root&gt;</code> for <strong>command-line</strong> and <strong>eclipse</strong> project</li>
<li><code>proj.android-studio</code> will be used as our <code>&lt;project_root&gt;</code> for <strong>Android Studio</strong> project.</li>
</ul>
<h3 id="copy-files">Copy Files</h3>
<p>Copy the everything from <code>plugin/android/libs</code> folder of this
bundle into your project's <strong><project_root>/libs</strong> folder.</p>
<ul>
<li>
<p>If you're using cocos2d-x from source copy the <strong>jar</strong> files to:</p>
<p>Android command-line:
<code>cocos2d/cocos/platform/android/java/libs</code></p>
<p>Android Studio:
<pre>
cocos2d/cocos/platform/android/java/libs
cocos2d/cocos/platform/android/libcocos2dx/libs
</pre></p>
</li>
<li>
<p>If you're using cocos2d-js or lua copy the <strong>jar</strong> files to:</p>
<p>Android command-line:
<code>frameworks/cocos2d-x/cocos/platform/android/java/libs</code></p>
<p>Android Studio:
<pre>
frameworks/cocos2d-x/cocos/platform/android/java/libs
frameworks/cocos2d-x/cocos/platform/android/libcocos2dx/libs
</pre></p>
</li>
<li>
<p>If you're using prebuilt cocos2d-x copy the <strong>jar</strong> files to:</p>
<p>Android command-line:
<code>proj.android/libs</code></p>
</li>
</ul>
<h4 id="copy-jni-libs">Copy jni libs</h4>
<p>Copy and overwrite all the folders from <code>plugin/android/jni</code>
to your <code>&lt;project_root&gt;/jni/</code> directory.</p>
<h3 id="edit-androidmanifestxml">Edit <code>AndroidManifest.xml</code></h3>
<p>Include the following permissions above the <strong>application tag</strong>:</p>
<pre><code class="xml">&lt;service android:name=&quot;com.appnext.core.DownloadService&quot; /&gt;
&lt;activity android:name=&quot;com.appnext.ads.interstitial.InterstitialActivity&quot;
  android:hardwareAccelerated=&quot;true&quot; android:configChanges=&quot;keyboardHidden|orientation|screenSize&quot;
  android:theme=&quot;@android:style/Theme.NoTitleBar.Fullscreen&quot; /&gt;
&lt;activity android:name=&quot;com.appnext.ads.fullscreen.FullscreenActivity&quot;
  android:hardwareAccelerated=&quot;true&quot; android:configChanges=&quot;keyboardHidden|orientation|screenSize&quot;
  android:theme=&quot;@android:style/Theme.NoTitleBar.Fullscreen&quot; /&gt;

&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;
</code></pre>

<h3 id="edit-androidmk">Edit <code>Android.mk</code></h3>
<p>Edit <code>&lt;project_root&gt;/jni/Android.mk</code> to:</p>
<p>Add additional requirements to <strong>LOCAL_WHOLE_STATIC_LIBRARIES</strong>:</p>
<pre><code>LOCAL_WHOLE_STATIC_LIBRARIES += PluginAppnext
LOCAL_WHOLE_STATIC_LIBRARIES += sdkbox
</code></pre>

<p>Add a call to:</p>
<pre><code>$(call import-add-path,$(LOCAL_PATH))
</code></pre>

<p>before any <strong>import-module</strong> statements.</p>
<p>Add additional <strong>import-module</strong> statements at the end:</p>
<pre><code>$(call import-module, ./sdkbox)
$(call import-module, ./pluginappnext)
</code></pre>

<p>This means that your ordering should look similar to this:</p>
<pre><code>$(call import-add-path,$(LOCAL_PATH))
$(call import-module, ./sdkbox)
$(call import-module, ./pluginappnext)
</code></pre>

<p><strong>Note:</strong> It is important to make sure these statements are above the existing <code>$(call import-module,./prebuilt-mk)</code> statement, if you are using the pre-built libraries.</p>
<h3 id="modify-applicationmk-cocos2d-x-v30-to-v32-only">Modify <code>Application.mk</code> (Cocos2d-x v3.0 to v3.2 only)</h3>
<p>Edit <code>&lt;project_root&gt;/jni/Application.mk</code> to make sure <strong>APP_STL</strong> is defined
correctly. If <code>Application.mk</code> contains <code>APP_STL := c++_static</code>, it should be
changed to:</p>
<pre><code>APP_STL := gnustl_static
</code></pre>

<p>Copy all source and header files from <code>plugin/luabindings/</code> to your projects <code>Classes</code> folder.</p>
<p>Add all <code>.cpp</code> files, that you just copied, to <code>Android.mk</code> in the <strong>LOCAL_SRC_FILES</strong> section. Example</p>
<pre><code>LOCAL_SRC_FILES := hellocpp/main.cpp \
                ../../Classes/AppDelegate.cpp \
                ../../Classes/HelloWorldScene.cpp \
                                ../../Classes/NewSourceFile.cpp
</code></pre>

<h3 id="modify-appactivityjava">Modify <strong>AppActivity.java</strong></h3>
<h4 id="plugin-2403">Plugin &gt;= 2.4.0.3</h4>
<ol>
<li>Find the <strong>AppActivity.java</strong></li>
</ol>
<pre><code class="bash">find . -name &quot;AppActivity.java&quot;
</code></pre>

<ol>
<li>Replace <code>extends Cocos2dxActivity</code> with <code>extends com.sdkbox.plugin.SDKBoxActivity</code></li>
</ol>
<p>Example of the directory where the <strong>AppActivity.java</strong> file is located:</p>
<pre><code>cpp
  - proj.android/src/org/cocos2dx/cpp/AppActivity.java
  - proj.android-studio/app/src/org/cocos2dx/cpp/AppActivity.java
  - proj.android/app/src/org/cocos2dx/cpp/AppActivity.java ( from cocos2d-x 3.17)

lua
  - frameworks/runtime-src/proj.android/src/org/cocos2dx/lua/AppActivity.java
  - frameworks/runtime-src/proj.android-studio/app/src/org/cocos2dx/lua/AppActivity.java
  - frameworks/runtime-src/proj.android/app/src/org/cocos2dx/lua/AppActivity.java (from cocos2d-x 3.17)

js
  - frameworks/runtime-src/proj.android/src/org/cocos2dx/javascript/AppActivity.java
  - frameworks/runtime-src/proj.android/app/src/org/cocos2dx/javascript/AppActivity.java ( from cocos2d-x 3.17)
</code></pre>

<h4 id="plugin-2403_1">Plugin &lt; 2.4.0.3</h4>
<ul>
<li>
<p>If you're using cocos2d-x from source, assuming you are in the <strong>proj.android</strong> directory, <strong>Cocos2dxActivity.java</strong> is located:</p>
<p><code>../../cocos2d-x/cocos/platform/android/java/src/org/cocos2dx/
lib/Cocos2dxActivity.java</code></p>
</li>
<li>
<p>If you're using the prebuilt cocos2d-x libraries assuming you are in the <code>proj.android</code> directory, <strong>Cocos2dxActivity.java</strong> is located:</p>
<p><code>./src/org/cocos2dx/lib/Cocos2dxActivity.java</code></p>
</li>
</ul>
<p><strong>Note:</strong> When using Cocos2d-x from source, different versions have <strong>Cocos2dxActivity.java</strong> in a different location. One way to find the location is to look in <strong>proj.android/project.properties</strong>. Example:
  <code>android.library.reference.1=../../cocos2d-x/cocos/platform/android/java</code></p>
<p>In this case, <strong>Cocos2dxActivity.java</strong> should be located at:</p>
<pre><code>../../cocos2d-x/cocos/platform/android/java/src/org/cocos2dx/lib/Cocos2dxActivity.java
</code></pre>

<ul>
<li>Modify <strong>Cocos2dxActivity.java</strong> to add the following imports:</li>
</ul>
<pre><code class="java">import android.content.Intent;
import com.sdkbox.plugin.SDKBox;
</code></pre>

<ul>
<li>Second, modify <strong>Cocos2dxActivity.java</strong> to edit the <code>onCreate(final Bundle savedInstanceState)</code> function to add a call to <code>SDKBox.init(this);</code>. The placement of this call is important. It must be done after the call to <code>onLoadNativeLibraries();</code>. Example:</li>
</ul>
<pre><code class="java">onLoadNativeLibraries();
SDKBox.init(this);
</code></pre>

<ul>
<li>
<p>Last, we need to insert the proper <strong>overrides</strong> code. There are a few rules here.</p>
<ul>
<li>
<p>If the method listed has not been defined, <strong>add it</strong>.</p>
</li>
<li>
<p>If the method listed has been defined, add the calls to <code>SDKBox</code> in the <strong>same</strong> existing function.</p>
</li>
</ul>
</li>
</ul>
<pre><code class="java">    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
          if(!SDKBox.onActivityResult(requestCode, resultCode, data)) {
            super.onActivityResult(requestCode, resultCode, data);
          }
    }
    @Override
    protected void onStart() {
          super.onStart();
          SDKBox.onStart();
    }
    @Override
    protected void onStop() {
          super.onStop();
          SDKBox.onStop();
    }
    @Override
    protected void onResume() {
          super.onResume();
          SDKBox.onResume();
    }
    @Override
    protected void onPause() {
          super.onPause();
          SDKBox.onPause();
    }
    @Override
    public void onBackPressed() {
          if(!SDKBox.onBackPressed()) {
            super.onBackPressed();
          }
    }
</code></pre>

<h2 id="manual-integration-for-google-play-services-sdk-dependent-library-only">Manual Integration for Google Play Services SDK (dependent library only)</h2>
<h3 id="suggestion">Suggestion</h3>
<p>Please try the SDKBOX installer first. It will do all the following step for you automatically.</p>
<pre><code class="bash">$ sdkbox import googleplayservices
</code></pre>

<h3 id="modify-projectproperties">Modify <code>project.properties</code></h3>
<p>An <strong>Android Library Reference</strong> for <strong>Google Play Services</strong> is required. The
path will be different depending upon your setup. Also, this is an additional
download that does not come as part of a standard install. To install use the
<strong>sdk installer</strong> and choose <strong>extras-&gt;google play services</strong>. Here is an example of what this line could look like:</p>
<pre><code>android.library.reference.1=
../android/sdk.latest/extras/google/google_play_services/libproject/
google-play-services_lib
</code></pre>

<p><strong>Note:</strong> if you already have an <code>android.library.reference.1</code> you can add
another by incrementing the number as <code>android.library.reference.2</code>, etc.</p>
<h3 id="integration-manually">Integration manually</h3>
<p>We make a lite version of Google Play Services, the project repo is <a href="https://github.com/darkdukey/Google-Play-Service-Lite">https://github.com/darkdukey/Google-Play-Service-Lite</a></p>
<h4 id="copy-files_1">Copy Files</h4>
<p>Copy the <code>gps</code> folder from <code>plugin</code> folder of this bundle into your project's <strong><project_root>/libs</strong> folder.</p>
<ul>
<li>
<p>If you're using cocos2d-x from source copy the <code>gps</code> folder to:</p>
<p>Android command-line:
<code>cocos2d/cocos/platform/android/java/libs</code></p>
<p>Android Studio:
<code>cocos2d/cocos/platform/android/libcocos2dx/libs</code></p>
</li>
<li>
<p>If you're using cocos2d-js or lua copy the <code>gps</code> folder to:</p>
<p>Android command-line:
<code>frameworks/cocos2d-x/cocos/platform/android/java/libs</code></p>
<p>Android Studio:
<code>frameworks/cocos2d-x/cocos/platform/android/libcocos2dx/libs</code></p>
</li>
<li>
<p>If you're using prebuilt cocos2d-x copy the <code>gps</code> folder to:</p>
<p>Android command-line:
<code>&lt;project_root&gt;/libs</code></p>
</li>
</ul>
<h4 id="modify-files-for-eclipse">Modify files for Eclipse</h4>
<ol>
<li>Modify project.properties</li>
</ol>
<pre><code># For source project
android.library.reference.2=../cocos2d/cocos/platform/android/java/libs/gps/

# Or
# For framework project
android.library.reference.1=libs/gps/
</code></pre>

<h4 id="modify-files-for-android-studio">Modify files for Android Studio</h4>
<h5 id="1-modify-cocos2dcocosplatformandroidlibcocos2dxbuildgradle">1. Modify cocos2d/cocos/platform/android/libcocos2dx/build.gradle</h5>
<pre><code> dependencies {
+    compile project(':gps')
     compile fileTree(dir: '../java/libs', include: ['*.jar'])
 }
</code></pre>

<h5 id="2-modify-projandroid-studioappprojectproperties">2. Modify proj.android-studio/app/project.properties</h5>
<pre><code> # Project target.
 target=android-14
+android.library.reference.1=../cocos2d/cocos/platform/android/java/libs/gps/
</code></pre>

<h5 id="3-modify-projandroid-studiosettingsgradle">3. Modify proj.android-studio/settings.gradle</h5>
<pre><code> project(':libcocos2dx').projectDir = new File(settingsDir, '../cocos2d/cocos/platform/android/libcocos2dx')
 include ':your_project_name'
 project(':your_project_name').projectDir = new File(settingsDir, 'app')
+
+include ':gps'
+project(':gps').projectDir = new File(settingsDir, '../cocos2d/cocos/platform/android/java/libs/gps')
</code></pre>

<h2 id="proguard-optional">Proguard (optional)</h2>
<ul>
<li>Edit <code>project.properties</code>  to specify a <code>Proguard</code> configuration file. Example:</li>
</ul>
<pre><code>proguard.config=proguard.cfg
</code></pre>

<ul>
<li>Edit the file you specified to include the following:</li>
</ul>
<pre><code># If your project uses WebView with JS, uncomment the following
# and specify the fully qualified class name to the JavaScript interface
# class:
#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
#   public *;
#}

# cocos2d-x
-keep public class org.cocos2dx.** { *; }
-dontwarn org.cocos2dx.**
-keep public class com.chukong.** { *; }
-dontwarn com.chukong.**

# google play service
-keep public class com.google.android.gms.** { public *; }
-dontwarn com.google.android.gms.**

-keep class com.google.protobuf.** { *; }
-dontwarn com.google.protobuf.**

-keep class * extends java.util.ListResourceBundle {
    protected Object[][] getContents();
}

-keep public class com.google.android.gms.common.internal.safeparcel.SafeParcelable {
    public static final *** NULL;
}

-keepnames @com.google.android.gms.common.annotation.KeepName class *
-keepclassmembernames class * {
    @com.google.android.gms.common.annotation.KeepName *;
}

-keepnames class * implements android.os.Parcelable {
    public static final ** CREATOR;
}

#sdkbox
-keep public class com.sdkbox.** { *; }
-dontwarn com.sdkbox.**

#appnext
-keep class com.appnext.** { *; }
-dontwarn com.appnext.**

</code></pre>

<p><strong>Note:</strong> Proguard only works with <strong>Release</strong> builds (i.e <code>cocos run -m release</code>) debug builds do not invoke Proguard rules.</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Build Date UTC :2018-11-29 02:26:59.094188, Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        
        <script src="../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script>var base_url = '../../..';</script>
        <script src="../../../js/base.js"></script>
        


        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-70044300-2', 'auto');
            ga('send', 'pageview');
        </script>
        
    </body>
</html>
