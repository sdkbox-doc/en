<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">

	<title>Apteligent with C++ - SDKBOX</title>
        
        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../../css/base.css?2" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">
        <link href="../../../css/custom.css" rel="stylesheet">
        

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="http://sdkbox.com"><img src="http://www.cocos2d-x.org/s/sdkbox/SDKBOX_logo.png">Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">

            <ul class="nav navbar-nav navbar-right">


            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../..">Overview</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cocos <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../cocos/">Cocos Integration</a>
</li>

                        
                            
<li >
    <a href="../../../installer/">Installer</a>
</li>

                        
                            
<li >
    <a href="../../../faq/">FAQ</a>
</li>

                        
                            
  
  <li class="dropdown-submenu">
    <a tabindex="-1" class="non-link">API</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../api/gpg/">Google Play Games</a>
</li>

        
    </ul>
  </li>
  

                        
                            
  
  <li class="dropdown-submenu">
    <a tabindex="-1" class="non-link">Plugins</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../achievement/">Achievements</a>
</li>

        
            
  

        
            
<li >
    <a href="../../adcolony/">AdColony</a>
</li>

        
            
  

        
            
<li >
    <a href="../../admob/">AdMob</a>
</li>

        
            
  

        
            
<li >
    <a href="../../agecheq/">AgeCheq</a>
</li>

        
            
  

        
            
<li >
    <a href="../../appnext/">Appnext</a>
</li>

        
            
  

        
            
<li >
    <a href="../../appodeal/">Appodeal</a>
</li>

        
            
  

        
            
<li >
    <a href="../../amazon/">Amazon</a>
</li>

        
            
  

        
            
<li >
    <a href="../">Apteligent</a>
</li>

        
            
  

        
            
<li >
    <a href="../../bee7/">Bee7</a>
</li>

        
            
  

        
            
<li >
    <a href="../../chartboost/">Chartboost</a>
</li>

        
            
  

        
            
<li >
    <a href="../../facebook/">Facebook</a>
</li>

        
            
  

        
            
<li >
    <a href="../../flurryanalytics/">Flurry Analytics</a>
</li>

        
            
  

        
            
<li >
    <a href="../../fyber/">Fyber</a>
</li>

        
            
  

        
            
<li >
    <a href="../../googleanalytics/">Google Analytics</a>
</li>

        
            
  

        
            
<li >
    <a href="../../googleplay/">Google Play Games</a>
</li>

        
            
  

        
            
<li >
    <a href="../../iap/">In-App Purchase</a>
</li>

        
            
  

        
            
<li >
    <a href="../../inmobi/">InMobi</a>
</li>

        
            
  

        
            
<li >
    <a href="../../kochava/">Kochava</a>
</li>

        
            
  

        
            
<li >
    <a href="../../leadbolt/">LeadBolt</a>
</li>

        
            
  

        
            
<li >
    <a href="../../leaderboard/">Leaderboard</a>
</li>

        
            
  

        
            
<li >
    <a href="../../onesignal/">OneSignal</a>
</li>

        
            
  

        
            
<li >
    <a href="../../playphone/">Playphone</a>
</li>

        
            
  

        
            
<li >
    <a href="../../review/">Ratings & Reviews</a>
</li>

        
            
  

        
            
<li >
    <a href="../../sdkboxads/">SDKBOX Ads</a>
</li>

        
            
  

        
            
<li >
    <a href="../../sdkboxplay/">SDKBOX Play</a>
</li>

        
            
  

        
            
<li >
    <a href="../../share/">Social Sharing</a>
</li>

        
            
  

        
            
<li >
    <a href="../../tune/">Tune</a>
</li>

        
            
  

        
            
<li >
    <a href="../../valuepotion/">Valuepotion</a>
</li>

        
            
  

        
            
<li >
    <a href="../../vungle/">Vungle</a>
</li>

        
            
  

        
            
<li >
    <a href="../../youtube/">Youtube</a>
</li>

        
            
  

        
    </ul>
  </li>
  

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Unity <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../unity/allinone/">SDKBOX AllInOne</a>
</li>

                        
                            
<li >
    <a href="../../../unity/iap/">In-App Purchase</a>
</li>

                        
                            
<li >
    <a href="../../../unity/review/">Ratings & Reviews</a>
</li>

                        
                            
<li >
    <a href="../../../unity/socialshare/">SocialShare</a>
</li>

                        
                            
<li >
    <a href="../../../unity/googleanalytics/">Google Analytics</a>
</li>

                        
                            
<li >
    <a href="../../../unity/sdkboxplay/">SDKBOX Play</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Unreal <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../unreal/iap/">In-App Purchase</a>
</li>

                        
                            
<li >
    <a href="../../../unreal/chartboost/">Chartboost</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Creator <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../ccc/">How To</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">LiveOps <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../liveops/">Setup</a>
</li>

                        
                            
<li >
    <a href="../../../liveops/remote-config/">Remote Configuration</a>
</li>

                        
                            
<li >
    <a href="../../../liveops/receipt-verification/">Server-side IAP receipt verification</a>
</li>

                        
                            
<li >
    <a href="../../../liveops/catalog-management/">On-the-fly catalog management</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../../release-note/">About</a>
                    </li>
                
                

                <li style="margin-left:30px">
                    <a href="http://sdkbox-doc.github.io/zh/">中文</a>
                </li>
                
                </ul>
            




            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#integration">Integration</a></li>
	
    
        <li class="main "><a href="#important-notice">Important Notice</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#disable-app-transport-security">Disable App Transport Security</a></li>
        
            <li><a href="#disable-bitcode-support">Disable Bitcode support</a></li>
        
            <li><a href="#set-your-game-requires-full-screen">Set your game requires full screen</a></li>
        
            <li><a href="#whitelist-canopenurl-function">Whitelist canOpenURL function</a></li>
        
            <li><a href="#json-configuration">JSON Configuration</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#usage">Usage</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#initialize-apteligent">Initialize Apteligent</a></li>
        
            <li><a href="#logging-breadcrumbs">Logging Breadcrumbs</a></li>
        
            <li><a href="#logging-user-metadata">Logging User Metadata</a></li>
        
            <li><a href="#logging-userflows">Logging Userflows</a></li>
        
            <li><a href="#modifying-the-value-of-a-userflow">Modifying the Value of a Userflow</a></li>
        
            <li><a href="#logging-network-requests">Logging Network Requests</a></li>
        
            <li><a href="#filtering-captured-data">Filtering Captured Data</a></li>
        
            <li><a href="#configuring-location">Configuring Location</a></li>
        
            <li><a href="#other-tasks">Other Tasks</a></li>
        
            <li><a href="#implement-apteligentlistener">Implement ApteligentListener</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#api-reference">API Reference</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#methods">Methods</a></li>
        
            <li><a href="#listeners">Listeners</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#manual-integration">Manual Integration</a></li>
	
    
        <li class="main "><a href="#manual-integration-for-ios">Manual Integration For iOS</a></li>
	
    
        <li class="main "><a href="#manual-integration-for-android">Manual Integration For Android</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#copy-files">Copy Files</a></li>
        
            <li><a href="#edit-androidmanifestxml">Edit AndroidManifest.xml</a></li>
        
            <li><a href="#edit-androidmk">Edit Android.mk</a></li>
        
            <li><a href="#edit-aplicationmk">Edit Aplication.mk</a></li>
        
            <li><a href="#modify-java">Modify .java</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#proguard-optional">Proguard (optional)</a></li>
	
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p><a href="../">&#8249; Apteligent Doc Home</a></p>
<h1>Apteligent Integration Guide</h1>

<h4><em><b>For the C++ version of cocos2d-x v2.x</b> - (<a href="./../">all other versions</a>)</em></h4>

<h2 id="integration">Integration</h2>
<p>Sign up for <a href="https://www.apteligent.com/">Apteligent</a> and create your app.</p>
<p>Open a terminal and use the following command to install the SDKBOX Apteligent plugin.</p>
<pre><code class="bash">$ sdkbox import apteligent
</code></pre>

<h2 id="important-notice">Important Notice</h2>
<p>Please make sure the following settings in your project for plugin to function correctly.</p>
<h4 id="disable-app-transport-security">Disable App Transport Security</h4>
<p>Adding the following entry to the <code>info.plist</code> file:</p>
<pre><code>&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;
&lt;dict&gt;
    &lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;
    &lt;true/&gt;
&lt;/dict&gt;
</code></pre>

<p>It should look something like this:</p>
<p><img alt="" src="../../../imgs/ATS.png" /></p>
<h4 id="disable-bitcode-support">Disable Bitcode support</h4>
<p>You have to turn off <strong>Bitcode</strong> support. If you don't cocos2d-x will fail to build.</p>
<h4 id="set-your-game-requires-full-screen">Set your game requires full screen</h4>
<p>If your game doesn't support all screen orientations you will need to check <code>Requires full screen</code> in Xcode. If you do not, your app will fail Apple's submission process.</p>
<h4 id="whitelist-canopenurl-function">Whitelist canOpenURL function</h4>
<p>This depends on what plugins are in your project. You may need to add the required entry to the <code>info.plist</code>, under <code>LSApplicationQueriesSchemes</code>.</p>
<!--## Configuration

## Remote Configuration

Optionally, you can choose to use SDKBOX LiveOps to remotely update this plugin's configuration. [Learn more](/liveops/remote-config)-->

<h3 id="json-configuration">JSON Configuration</h3>
<p>SDKBOX Installer will automatically inject a sample configuration to your <code>sdkbox_config.json</code>, that you have to modify it before you can use it for your own app</p>
<ul>
<li>id: Apteligent App ID</li>
</ul>
<h4 id="options">options</h4>
<hr />
<ul>
<li>
<p>monitor_connection [bool]: (iOS only)</p>
<ul>
<li>true [default]</li>
<li>false</li>
</ul>
</li>
</ul>
<blockquote>
<p>Determines whether Service Monitoring should capture network performance information for network calls made through NSURLConnection.</p>
</blockquote>
<ul>
<li>
<p>monitor_session [bool]: (iOS only)</p>
<ul>
<li>true [default]</li>
<li>false</li>
</ul>
</li>
</ul>
<blockquote>
<p>Determines whether Service Monitoring should capture network performance information for network calls made through NSURLSession.</p>
</blockquote>
<ul>
<li>
<p>enable_service_monitoring [bool]:</p>
<ul>
<li>true [default]</li>
<li>false</li>
</ul>
</li>
</ul>
<blockquote>
<p>This flag determines wither Apteligent service monitoring is enabled at all.</p>
</blockquote>
<ul>
<li>
<p>delay_sending_appload [bool]:</p>
<ul>
<li>true</li>
<li>false [default]</li>
</ul>
</li>
</ul>
<blockquote>
<p>Delay to reports an app load event.</p>
</blockquote>
<ul>
<li>
<p>url_filters [array]:</p>
<ul>
<li>["http://www.gmail.com", "www.other.com"]</li>
</ul>
</li>
</ul>
<blockquote>
<p>These filters are used to make it so certain network performance information is not reported to Apteligent.</p>
</blockquote>
<ul>
<li>
<p>logcat_reporting_enabled: (Android only) Include Logcat</p>
<ul>
<li>true</li>
<li>false [default]</li>
</ul>
</li>
</ul>
<blockquote>
<p>Including system log data (Logcat) can be helpful for debugging crashes and handled exceptions,
but it comes at the cost of slightly increasing disk and network usage, which is why this feature
must be manually enabled. Apteligent collects the last 100 lines of logcat data.</p>
</blockquote>
<p>more information:</p>
<ul>
<li><a href="https://docs.crittercism.com/ios/ios.html">https://docs.crittercism.com/ios/ios.html</a></li>
<li><a href="https://docs.crittercism.com/android/android.html">https://docs.crittercism.com/android/android.html</a></li>
</ul>
<p>Example:</p>
<pre><code class="json">{
    &quot;ios&quot;: {
        &quot;Apteligent&quot;:{
            &quot;debug&quot;:true,
            &quot;id&quot;:&quot;956194d922984692a3184816ec3a510300555300&quot;,
            &quot;monitor_connection&quot;:true,
            &quot;monitor_session&quot;:true,
            &quot;enable_service_monitoring&quot;:true,
            &quot;delay_sending_appload&quot;:false,
            &quot;url_filters&quot;:[
                &quot;https://metrics.sdkbox.com&quot;,
                &quot;http://www.gmail.com&quot;
            ]
        }
    },
    &quot;android&quot;: {
        &quot;Apteligent&quot;:{
            &quot;debug&quot;:true,
            &quot;id&quot;:&quot;3f66168979494ce38374b4d32d637dcc00555300&quot;,
            &quot;enable_service_monitoring&quot;:true,
            &quot;delay_sending_appload&quot;:false,
            &quot;url_filters&quot;:[
                &quot;https://metrics.sdkbox.com&quot;,
                &quot;http://www.gmail.com&quot;
            ],
            &quot;version&quot;:&quot;version:2.0.4 build:4981 codeName:Cactus&quot;,
            &quot;version_string_include_version_code&quot;:true,
            &quot;logcat_reporting_enabled&quot;:true
        }
    }
}

</code></pre>

<h2 id="usage">Usage</h2>
<h3 id="initialize-apteligent">Initialize Apteligent</h3>
<p>Initialize the plugin where appropriate in your code. We recommend to do this in the <code>AppDelegate::applicationDidFinishLaunching()</code> or <code>AppController:didFinishLaunchingWithOptions()</code>. Make sure to include the appropriate headers. Example:</p>
<pre><code class="cpp">#include &quot;PluginApteligent/PluginApteligent.h&quot;
AppDelegate::applicationDidFinishLaunching()
{
     sdkbox::PluginApteligent::init();
}
</code></pre>

<h3 id="logging-breadcrumbs">Logging Breadcrumbs</h3>
<pre><code class="cpp">// leave a breadcrumb
sdkbox::PluginApteligent::leaveBreadcrumb(&quot;User tapped start button&quot;);

// perform all breadcrumb writes on a background thread
sdkbox::PluginApteligent::setAsyncBreadcrumbMode(true);
</code></pre>

<h3 id="logging-user-metadata">Logging User Metadata</h3>
<pre><code>// Adding a Username
sdkbox::PluginApteligent::setUsername(&quot;MrsCritter&quot;);

// Adding Arbitrary User Metadata
sdkbox::PluginApteligent::setValueforKey(&quot;5&quot;, &quot;Game Level&quot;);
</code></pre>

<h3 id="logging-userflows">Logging Userflows</h3>
<pre><code class="cpp">// Beginning a Userflow
sdkbox::PluginApteligent::beginUserflow(&quot;login&quot;);

// Ending a Userflow
sdkbox::PluginApteligent::endUserflow(&quot;login&quot;);

// Failing a Userflow
sdkbox::PluginApteligent::failUserflow(&quot;login&quot;);

// Cancelling a Userflow
sdkbox::PluginApteligent::cancelUserflow(&quot;login&quot;);
</code></pre>

<h3 id="modifying-the-value-of-a-userflow">Modifying the Value of a Userflow</h3>
<pre><code class="cpp">int valueInCents = sdkbox::PluginApteligent::valueForUserflow(&quot;my_userflow&quot;);
valueInCents += 5;
sdkbox::PluginApteligent::setValueforUserflow(valueInCents, &quot;my_userflow&quot;);

</code></pre>

<h3 id="logging-network-requests">Logging Network Requests</h3>
<pre><code class="cpp">sdkbox::PluginApteligent::logNetworkRequest(&quot;GET&quot;, &quot;http://www.abc123def456.com&quot;, 2.0, 1000, 100, 200);
</code></pre>

<h3 id="filtering-captured-data">Filtering Captured Data</h3>
<pre><code class="cpp">sdkbox::PluginApteligent::addFilter(&quot;www.gmail.com&quot;);
</code></pre>

<h3 id="configuring-location">Configuring Location</h3>
<pre><code class="cpp">// Beijing, China
sdkbox::PluginApteligent::updateLocation(39.9042, 116.4074);
</code></pre>

<h3 id="other-tasks">Other Tasks</h3>
<pre><code class="cpp">// Allowing Users to Opt Out of Apteligent
sdkbox::PluginApteligent::setOptOutStatus(true);

// Changing the verbosity of Apteligent’s Logs
// sdkbox::CRLoggingLevelSilent  : Turns off all Apteligent log messages
// sdkbox::CRLoggingLevelError   : Only print errors. An error is an unexpected event that will result not capturing important data
// sdkbox::CRLoggingLevelWarning : (Default) Only print warnings. Currently warning messages are printed when calling Apteligent methods before initializing Apteligent.
// sdkbox::CRLoggingLevelInfo    : The most verbose level of logging
sdkbox::PluginApteligent::setLoggingLevel(sdkbox::CRLoggingLevelInfo);

// Send App Load Data
// You must set `&quot;delay_sending_appload&quot;:true` in `sdkbox_config.json` first
sdkbox::PluginApteligent::sendAppLoadData();
</code></pre>

<h3 id="implement-apteligentlistener">Implement ApteligentListener</h3>
<ul>
<li>You can implement ApteligentListener if you want to receive callbacks like video finish playing.</li>
</ul>
<pre><code class="cpp">#include &quot;PluginApteligent/PluginApteligent.h&quot;
class MyClass : public sdkbox::ApteligentListener
{
private:
    void onCrashOnLastLoad() {} // not support on android
}
</code></pre>

<h2 id="api-reference">API Reference</h2>
<h3 id="methods">Methods</h3>
<pre><code class="cpp">static bool init ( ) ;
</code></pre>

<blockquote>
<p>initialize the plugin instance.</p>
</blockquote>
<pre><code class="cpp">static void setListener ( ApteligentListener * listener ) ;
</code></pre>

<blockquote>
<p>Set listener to listen for apteligent events</p>
</blockquote>
<pre><code class="cpp">static ApteligentListener * getListener ( ) ;
</code></pre>

<blockquote>
<p>Get the listener</p>
</blockquote>
<pre><code class="cpp">static void removeListener ( ) ;
</code></pre>

<blockquote>
<p>Remove the listener, and can't listen to events anymore</p>
</blockquote>
<pre><code class="cpp">static void addFilter ( const std::string &amp; filter ) ;
</code></pre>

<blockquote>
<p>Adds an additional filter for network instrumentation.</p>
</blockquote>
<pre><code class="cpp">static void leaveBreadcrumb ( const std::string &amp; breadcrumb ) ;
</code></pre>

<blockquote>
<p>Breadcrumbs provide the ability to track activity within your app.</p>
</blockquote>
<pre><code class="cpp">static void setAsyncBreadcrumbMode ( bool writeAsync ) ;
</code></pre>

<blockquote>
<p>By default, breadcrumbs are flushed to disk immediately when written.
This is by design - in order to provide an accurate record of everything
that happened up until the point your app crashed.</p>
</blockquote>
<pre><code class="cpp">static void updateLocation ( double latitude , double longitude ) ;
</code></pre>

<blockquote>
<p>Inform Apteligent of the device's most recent location for use with
performance monitoring.</p>
</blockquote>
<pre><code class="cpp">static bool logNetworkRequest ( const std::string &amp; method ,
                                const std::string &amp; urlString ,
                                long latency ,
                                long bytesRead ,
                                long bytesSent ,
                                long responseCode ) ;
</code></pre>

<blockquote>
<p>Logging endpoints is a way of manually logging custom network library
network access to URL's which fall outside Apteligent's monitoring
of NSURLConnection and ASIHTTPRequest method calls.</p>
</blockquote>
<pre><code class="cpp">static void setOptOutStatus ( bool status ) ;
</code></pre>

<blockquote>
<p>If you wish to offer your users the ability to opt out of Apteligent
crash reporting, you can set the OptOutStatus to YES. If you do so, any
pending crash reports will be purged.</p>
</blockquote>
<pre><code class="cpp">static bool getOptOutStatus ( ) ;
</code></pre>

<blockquote>
<p>Retrieve current opt out status.</p>
</blockquote>
<pre><code class="cpp">static void setMaxOfflineCrashReports ( int max ) ;
</code></pre>

<blockquote>
<p>Set the maximum number of crash reports that will be stored on
the local device if the device does not have internet connectivity. If
more than |maxOfflineCrashReports| crashes occur, the oldest crash will be
overwritten. Decreasing the value of this setting will not delete
any offline crash reports. Unsent crash reports will be kept until they are
successfully transmitted to Apteligent, hence there may be more than
|maxOfflineCrashReports| stored on the device for a short period of time.</p>
</blockquote>
<pre><code class="cpp">static int maxOfflineCrashReports ( ) ;
</code></pre>

<blockquote>
<p>Get the maximum number of Apteligent crash reports that will be stored on
the local device if the device does not have internet connectivity.</p>
</blockquote>
<pre><code class="cpp">static std::string getUserUUID ( ) ;
</code></pre>

<blockquote>
<p>Get the Apteligent generated unique identifier for this device.</p>
</blockquote>
<pre><code class="cpp">static void setUsername ( const std::string &amp; username ) ;
</code></pre>

<blockquote>
<p>Associate a username string with the device's Apteligent UUID. This will
send the association to Apteligent's back end.</p>
</blockquote>
<pre><code class="cpp">static void setValueforKey ( const std::string &amp; value ,
                             const std::string &amp; key ) ;
</code></pre>

<blockquote>
<p>Associate an arbitrary key/value pair with the device's Apteligent UUID.</p>
</blockquote>
<pre><code class="cpp">static bool didCrashOnLastLoad ( ) ;
</code></pre>

<blockquote>
<p>Did the application crash on the previous load?</p>
</blockquote>
<pre><code class="cpp">static void beginUserflow ( const std::string &amp; name ) ;
</code></pre>

<blockquote>
<p>Init and begin a userflow with a default value.</p>
</blockquote>
<pre><code class="cpp">static void beginUserflow ( const std::string &amp; name , int value ) ;
</code></pre>

<blockquote>
<p>Init and begin a userflow with an input value.</p>
</blockquote>
<pre><code class="cpp">static void cancelUserflow ( const std::string &amp; name ) ;
</code></pre>

<blockquote>
<p>Cancel a userflow as if it never existed.</p>
</blockquote>
<pre><code class="cpp">static void endUserflow ( const std::string &amp; name ) ;
</code></pre>

<blockquote>
<p>End an already begun userflow successfully.</p>
</blockquote>
<pre><code class="cpp">static void failUserflow ( const std::string &amp; name ) ;
</code></pre>

<blockquote>
<p>End an already begun userflow as a failure.</p>
</blockquote>
<pre><code class="cpp">static int valueForUserflow ( const std::string &amp; name ) ;
</code></pre>

<blockquote>
<p>Get the currency cents value of a userflow.</p>
</blockquote>
<pre><code class="cpp">static void setValueforUserflow ( int value , const std::string &amp; name ) ;
</code></pre>

<blockquote>
<p>Set the currency cents value of a userflow.</p>
</blockquote>
<pre><code class="cpp">static void sendAppLoadData ( ) ;
</code></pre>

<blockquote>
<p>Tell Apteligent to send app load event.
By default, Apteligent will send app load event automatically when your app is started
However, if you set delaySendingAppLoad flag to YES on config, you can call this method to
manually send app load event.</p>
</blockquote>
<pre><code class="cpp">static void setLoggingLevel ( int loggingLevel ) ;
</code></pre>

<blockquote>
<p>Set the logging level to tune the verbosity of Apteligent log messages.</p>
</blockquote>
<h3 id="listeners">Listeners</h3>
<pre><code class="cpp">void onCrashOnLastLoad ( ) {
</code></pre>

<blockquote>
<p>Notifies the delegate that the app has crash last time.</p>
</blockquote>
<h2 id="manual-integration">Manual Integration</h2>
<p>If the <em>SDKBOX Installer</em> <strong>fails</strong> to complete successfully, it is possible to integrate SDKBOX manually. If the installer complete successfully, please <strong>do not</strong> complete anymore of this document. It is not necessary.</p>
<p>These steps are listed last in this document on purpose as they are seldom needed. If you find yourself using these steps, please, after completing, double back and re-read the steps above for other integration items.</p>
<h2 id="manual-integration-for-ios">Manual Integration For iOS</h2>
<p>Drag and drop the following frameworks from the <strong>plugins/ios</strong> folder of the <code>Apteligent</code> bundle into your Xcode project, check <code>Copy items if needed</code> when
adding frameworks:</p>
<blockquote>
<p>sdkbox.framework</p>
<p>PluginApteligent.framework</p>
<p>Crittercism.framework</p>
</blockquote>
<p>You also need to add the following system frameworks, if you don't already have them:</p>
<blockquote>
<p>SystemConfiguration.framework</p>
<p>CoreLocation.framework</p>
</blockquote>
<h2 id="manual-integration-for-android">Manual Integration For Android</h2>
<p>SDKBOX supports three different kinds of <strong>Android</strong> projects <strong>command-line</strong>, <strong>eclipse</strong> and <strong>Android Studio</strong>. </p>
<ul>
<li><code>proj.android</code> will be used as our <code>&lt;project_root&gt;</code> for <strong>command-line</strong> and <strong>eclipse</strong> project</li>
<li><code>proj.android-studio</code> will be used as our <code>&lt;project_root&gt;</code> for <strong>Android Studio</strong> project.</li>
</ul>
<h3 id="copy-files">Copy Files</h3>
<p>Copy the everything from <code>plugin/android/libs</code> folder of this
bundle into your project’s <strong>proj.android/libs</strong> folder.</p>
<h4 id="copy-jni-libs">Copy jni libs</h4>
<p>Copy and overwrite all the folders from <code>plugin/android/jni</code>
to your <code>&lt;project_root&gt;/jni/</code> directory.</p>
<blockquote>
<p>Note: sdkbox link with <code>gnustl</code> by default, if your project link with <code>c++static</code> please replace the files in <code>&lt;project_root&gt;/jni/&lt;plugin_name&gt;/libs</code> with files in <code>&lt;project_root&gt;/jni/&lt;plugin_name&gt;/libs_c++_static</code> folder</p>
</blockquote>
<h3 id="edit-androidmanifestxml">Edit <code>AndroidManifest.xml</code></h3>
<p>Include the following permissions above the <strong>application tag</strong>:</p>
<pre><code class="xml">    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;
    &lt;uses-permission android:name=&quot;android.permission.GET_TASKS&quot;/&gt;
</code></pre>

<h3 id="edit-androidmk">Edit <code>Android.mk</code></h3>
<p>Edit <code>proj.android/jni/Android.mk</code> to:</p>
<p>Add additional requirements to <strong>LOCAL_WHOLE_STATIC_LIBRARIES</strong>:</p>
<pre><code>LOCAL_WHOLE_STATIC_LIBRARIES += android_native_app_glue
LOCAL_LDLIBS += -landroid
LOCAL_LDLIBS += -llog
LOCAL_WHOLE_STATIC_LIBRARIES += PluginApteligent
LOCAL_WHOLE_STATIC_LIBRARIES += sdkbox
</code></pre>

<p>Add a call to:</p>
<pre><code>$(call import-add-path,$(LOCAL_PATH))
</code></pre>

<p>before any <strong>import-module</strong> statements.</p>
<p>Add additional <strong>import-module</strong> statements at the end:</p>
<pre><code>$(call import-module, ./sdkbox)
$(call import-module, ./pluginapteligent)
</code></pre>

<p>This means that your ordering should look similar to this:</p>
<pre><code>$(call import-add-path,$(LOCAL_PATH))
$(call import-module, ./sdkbox)
$(call import-module, ./pluginapteligent)
</code></pre>

<h3 id="edit-aplicationmk">Edit <code>Aplication.mk</code></h3>
<p>Edit <code>proj.android/jni/Application.mk</code> to:</p>
<p>Add <strong>APP_PATFORM</strong> version requirements:</p>
<pre><code>APP_PLATFORM := android-15
</code></pre>

<h3 id="modify-java">Modify <strong><YourGameName>.java</strong></h3>
<ul>
<li>Modify <strong>proj.android/src/<package identifier>/<YourGameName>.java</strong> to add the following imports:</li>
</ul>
<pre><code class="java">import android.content.Intent;
import com.sdkbox.plugin.SDKBox;
</code></pre>

<ul>
<li>Second, modify the class to edit the <code>onCreate(final Bundle savedInstanceState)</code> function to add a call to <code>SDKBox.init(this);</code>. Example of what this might look like for you:</li>
</ul>
<pre><code class="java">protected void onCreate(Bundle savedInstanceState){
  super.onCreate(savedInstanceState);
  SDKBox.init(this);
}
</code></pre>

<ul>
<li>
<p>Last, we need to insert the proper <strong>overrides</strong> code. There are a few rules here.</p>
<ul>
<li>
<p>If the method listed has not been defined, <strong>add it</strong>.</p>
</li>
<li>
<p>If the method listed has been defined, add the calls to <code>SDKBox</code> in the <strong>same</strong> existing function.</p>
</li>
</ul>
</li>
</ul>
<pre><code class="java">    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
          if(!SDKBox.onActivityResult(requestCode, resultCode, data)) {
            super.onActivityResult(requestCode, resultCode, data);
          }
    }
    @Override
    protected void onStart() {
          super.onStart();
          SDKBox.onStart();
    }
    @Override
    protected void onStop() {
          super.onStop();
          SDKBox.onStop();
    }
    @Override
    protected void onResume() {
          super.onResume();
          SDKBox.onResume();
    }
    @Override
    protected void onPause() {
          super.onPause();
          SDKBox.onPause();
    }
    @Override
    public void onBackPressed() {
          if(!SDKBox.onBackPressed()) {
            super.onBackPressed();
          }
    }
</code></pre>

<h2 id="proguard-optional">Proguard (optional)</h2>
<ul>
<li>Edit <code>project.properties</code>  to specify a <code>Proguard</code> configuration file. Example:</li>
</ul>
<pre><code>proguard.config=proguard.cfg
</code></pre>

<ul>
<li>Edit the file you specified to include the following:</li>
</ul>
<pre><code># If your project uses WebView with JS, uncomment the following
# and specify the fully qualified class name to the JavaScript interface
# class:
#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
#   public *;
#}

# cocos2d-x
-keep public class org.cocos2dx.** { *; }
-dontwarn org.cocos2dx.**
-keep public class com.chukong.** { *; }
-dontwarn com.chukong.**

# google play service
-keep public class com.google.android.gms.** { public *; }
-dontwarn com.google.android.gms.**

-keep class * extends java.util.ListResourceBundle {
    protected Object[][] getContents();
}

-keep public class com.google.android.gms.common.internal.safeparcel.SafeParcelable {
    public static final *** NULL;
}

-keepnames @com.google.android.gms.common.annotation.KeepName class *
-keepclassmembernames class * {
    @com.google.android.gms.common.annotation.KeepName *;
}

-keepnames class * implements android.os.Parcelable {
    public static final ** CREATOR;
}

#sdkbox
-keep public class com.sdkbox.** { *; }
-dontwarn com.sdkbox.**

# apteligent
-keep public class android.webkit.** { *; }
-dontwarn android.webkit.**
-keep public class com.crittercism.**
-keepclassmembers public class com.crittercism.*
{
    *;
}

</code></pre>

<p><strong>Note:</strong> Proguard only works with <strong>Release</strong> builds (i.e <code>cocos run -m release</code>) debug builds do not invoke Proguard rules.</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        
        <script src="../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script>var base_url = '../../..';</script>
        <script src="../../../js/base.js"></script>
        

 
        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-70044300-2', 'auto');
            ga('send', 'pageview');
        </script>
        
    </body>
</html>
