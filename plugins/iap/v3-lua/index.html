<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">

	<title>In-App Purchases(IAP) with Lua - SDKBOX</title>
        
        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../../css/base.css?2" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">
        <link href="../../../css/custom.css" rel="stylesheet">
        

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="http://sdkbox.com"><img src="http://www.cocos2d-x.org/s/sdkbox/SDKBOX_logo.png">Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">

            <ul class="nav navbar-nav navbar-right">


            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../..">Overview</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cocos2d-x <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../cocos/">Overview</a>
</li>

                        
                            
<li >
    <a href="../../../installer/">CLI Installer</a>
</li>

                        
                            
<li >
    <a href="../../../qa/cocos_creator/">For Cocos Creator</a>
</li>

                        
                            
  
  <li class="dropdown-submenu">
    <a tabindex="-1" class="non-link">Plugins</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../achievement/">Achievements</a>
</li>

        
            
  

        
            
<li >
    <a href="../../adcolony/">AdColony</a>
</li>

        
            
  

        
            
<li >
    <a href="../../admob/">AdMob</a>
</li>

        
            
  

        
            
<li >
    <a href="../../agecheq/">AgeCheq</a>
</li>

        
            
  

        
            
<li >
    <a href="../../appnext/">Appnext</a>
</li>

        
            
  

        
            
<li >
    <a href="../../appodeal/">Appodeal</a>
</li>

        
            
  

        
            
<li >
    <a href="../../amazon/">Amazon</a>
</li>

        
            
  

        
            
<li >
    <a href="../../apteligent/">Apteligent</a>
</li>

        
            
  

        
            
<li >
    <a href="../../bee7/">Bee7</a>
</li>

        
            
  

        
            
<li >
    <a href="../../chartboost/">Chartboost</a>
</li>

        
            
  

        
            
<li >
    <a href="../../ethwallet/">EthWallet</a>
</li>

        
            
<li >
    <a href="../../facebook/">Facebook</a>
</li>

        
            
  

        
            
<li >
    <a href="../../gameroom/">Facebook Gameroom</a>
</li>

        
            
  

        
            
<li >
    <a href="../../firebase/">Firebase</a>
</li>

        
            
  

        
            
<li >
    <a href="../../flurryanalytics/">Flurry Analytics</a>
</li>

        
            
  

        
            
<li >
    <a href="../../fyber/">Fyber</a>
</li>

        
            
  

        
            
<li >
    <a href="../../googleanalytics/">Google Analytics</a>
</li>

        
            
  

        
            
<li >
    <a href="../../googleplay/">Google Play Games</a>
</li>

        
            
  

        
            
<li >
    <a href="../../hms/">Huawei Mobile Services</a>
</li>

        
            
  

        
            
<li >
    <a href="../">In-App Purchase</a>
</li>

        
            
  

        
            
<li >
    <a href="../../inmobi/">InMobi</a>
</li>

        
            
  

        
            
<li >
    <a href="../../kochava/">Kochava</a>
</li>

        
            
  

        
            
<li >
    <a href="../../leadbolt/">LeadBolt</a>
</li>

        
            
  

        
            
<li >
    <a href="../../leaderboard/">Leaderboard</a>
</li>

        
            
  

        
            
<li >
    <a href="../../misc/">Misc</a>
</li>

        
            
  

        
            
<li >
    <a href="../../onesignal/">OneSignal</a>
</li>

        
            
  

        
            
<li >
    <a href="../../playphone/">Playphone</a>
</li>

        
            
  

        
            
<li >
    <a href="../../phunwareads/">Phunware Ads</a>
</li>

        
            
  

        
            
<li >
    <a href="../../phunwaremessaging/">Phunware Messaging</a>
</li>

        
            
  

        
            
<li >
    <a href="../../review/">Ratings & Reviews</a>
</li>

        
            
  

        
            
<li >
    <a href="../../sdkboxads/">SDKBOX Ads</a>
</li>

        
            
  

        
            
<li >
    <a href="../../sdkboxplay/">SDKBOX Play</a>
</li>

        
            
  

        
            
<li >
    <a href="../../share/">Social Sharing</a>
</li>

        
            
  

        
            
<li >
    <a href="../../signinwithapple/">Sign in with Apple</a>
</li>

        
            
  

        
            
<li >
    <a href="../../tapcore/">Tapcore</a>
</li>

        
            
  

        
            
<li >
    <a href="../../tune/">Tune</a>
</li>

        
            
  

        
            
<li >
    <a href="../../unityads/">UnityAds</a>
</li>

        
            
  

        
            
<li >
    <a href="../../valuepotion/">Valuepotion</a>
</li>

        
            
  

        
            
<li >
    <a href="../../vungle/">Vungle</a>
</li>

        
            
  

        
            
<li >
    <a href="../../youtube/">Youtube</a>
</li>

        
            
  

        
    </ul>
  </li>
  

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Unity <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../unity/allinone/">SDKBOX AllInOne</a>
</li>

                        
                            
<li >
    <a href="../../../unity/iap/">In-App Purchase</a>
</li>

                        
                            
<li >
    <a href="../../../unity/review/">Ratings & Reviews</a>
</li>

                        
                            
<li >
    <a href="../../../unity/socialshare/">SocialShare</a>
</li>

                        
                            
<li >
    <a href="../../../unity/googleanalytics/">Google Analytics</a>
</li>

                        
                            
<li >
    <a href="../../../unity/sdkboxplay/">SDKBOX Play</a>
</li>

                        
                            
<li >
    <a href="../../../unity/addeals/">AdDeals</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Unreal <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../unreal/iap/">In-App Purchase</a>
</li>

                        
                            
<li >
    <a href="../../../unreal/chartboost/">Chartboost</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">LiveOps <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../liveops/">Setup</a>
</li>

                        
                            
<li >
    <a href="../../../liveops/remote-config/">Remote Configuration</a>
</li>

                        
                            
<li >
    <a href="../../../liveops/receipt-verification/">Server-side IAP receipt verification</a>
</li>

                        
                            
<li >
    <a href="../../../liveops/catalog-management/">On-the-fly catalog management</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../qa/install_sdkbox/">Install SDKBox</a>
</li>

                        
                            
<li >
    <a href="../../../qa/from-google-to-amazon/">From Google to Amazon</a>
</li>

                        
                            
<li >
    <a href="../../../qa/integration-admob-to-creator/">Admob in Creator</a>
</li>

                        
                            
<li >
    <a href="../../../qa/integration-fyber-to-cocos/">Fyber with Cocos2d-x</a>
</li>

                        
                            
<li >
    <a href="../../../qa/fb-share-on-cocos/">Facebook with Cocos2d-x</a>
</li>

                        
                            
<li >
    <a href="../../../qa/android_64k/">Fix Android 64K methods limit</a>
</li>

                        
                            
<li >
    <a href="../../../qa/integration-iap-on-unity/">IAP with Unity</a>
</li>

                        
                            
<li >
    <a href="../../../qa/use-gui-integration-ga-to-creator/">GA with SDKBox GUI in Creator</a>
</li>

                        
                            
<li >
    <a href="../../../qa/use-custom-activity-on-unity/">Unity Custom Activity</a>
</li>

                        
                            
<li >
    <a href="../../../qa/crypt-sdkbox-config/">Encrypt Decrypt sdkbox_config.json</a>
</li>

                        
                            
<li >
    <a href="../../../qa/sdkboxplay_troubleshoot/">SDKBoxPlay Troubleshoot</a>
</li>

                        
                            
<li >
    <a href="../../../qa/iap_troubleshoot/">IAP Troubleshoot</a>
</li>

                        
                            
<li >
    <a href="../../../qa/sdkbox-cmake/">CMake</a>
</li>

                        
                            
<li >
    <a href="../../../qa/faq/">FAQ</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../../release-note/">About</a>
                    </li>
                
                

                <li style="margin-left:30px">
                    <a href="http://sdkbox-doc.github.io/zh/">中文</a>
                </li>
                
                </ul>
            




            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#integration">Integration</a></li>
	
    
        <li class="main "><a href="#important-notice">Important Notice</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#disable-app-transport-security">Disable App Transport Security</a></li>
        
            <li><a href="#disable-bitcode-support">Disable Bitcode support</a></li>
        
            <li><a href="#set-your-game-requires-full-screen">Set your game requires full screen</a></li>
        
            <li><a href="#whitelist-canopenurl-function">Whitelist canOpenURL function</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#configuration">Configuration</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#test-iap-for-ios">Test IAP for iOS</a></li>
        
            <li><a href="#test-iap-for-android">Test IAP for android</a></li>
        
            <li><a href="#skpaymenttransactionstatedeferred-test">SKPaymentTransactionStateDeferred test</a></li>
        
            <li><a href="#initialization-opportunity">Initialization opportunity</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#usage">Usage</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#initialize-iap">Initialize IAP</a></li>
        
            <li><a href="#retrieve-latest-product-data">Retrieve latest Product data</a></li>
        
            <li><a href="#make-a-purchase">Make a purchase</a></li>
        
            <li><a href="#restore-purchase">Restore purchase</a></li>
        
            <li><a href="#handling-purchase-events">Handling Purchase Events</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#remote-configuration">Remote Configuration</a></li>
	
    
        <li class="main "><a href="#iap-receipts-verification">IAP Receipts Verification</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#implement-your-own-verification">Implement your own verification</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#promotion-iap">Promotion IAP</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#enable-promotion-iap">Enable Promotion IAP</a></li>
        
            <li><a href="#promotion-iap-setting">Promotion IAP Setting</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#api-reference">API Reference</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#methods">Methods</a></li>
        
            <li><a href="#listeners">Listeners</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#manual-integration">Manual Integration</a></li>
	
    
        <li class="main "><a href="#manual-integration-for-ios">Manual Integration For iOS</a></li>
	
    
        <li class="main "><a href="#manual-integration-for-android">Manual Integration For Android</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#copy-files">Copy Files</a></li>
        
            <li><a href="#edit-androidmanifestxml">Edit AndroidManifest.xml</a></li>
        
            <li><a href="#edit-androidmk">Edit Android.mk</a></li>
        
            <li><a href="#modify-applicationmk-cocos2d-x-v30-v32-only">Modify Application.mk (Cocos2d-x v3.0 - v3.2 only)</a></li>
        
            <li><a href="#modify-appactivityjava">Modify AppActivity.java</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#manual-integration-for-google-play-services-sdk-dependent-library-only">Manual Integration for Google Play Services SDK (dependent library only)</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#suggestion">Suggestion</a></li>
        
            <li><a href="#modify-projectproperties">Modify project.properties</a></li>
        
            <li><a href="#integration-manually">Integration manually</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#proguard-optional">Proguard (optional)</a></li>
	
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p><a href="../">&#8249; IAP Doc Home</a></p>
<h1>In-App Purchase Integration Guide</h1>

<h4><em><b>For the Lua version of cocos2d-x v3.x</b> - (<a href="./../">all other versions</a>)</em></h4>

<h2 id="integration">Integration</h2>
<p>Open a terminal and use the following command to install the SDKBOX IAP plugin. Make sure you setup the SDKBOX installer correctly.</p>
<pre><code class="bash">$ sdkbox import iap
</code></pre>

<p><strong>NOTE</strong>:
1. For iOS, you need Xcode9 because of https://developer.apple.com/app-store/promoting-in-app-purchases/</p>
<ol>
<li>
<p>For iOS, <a href="https://dev-ios.blogspot.com/2011/05/validity-time-auto-renewables-in.html">Auto-Renewables subscription, in sandbox the validity time differs from live environment!!!</a></p>
<table>
<thead>
<tr>
<th>Durations</th>
<th>Sandbox Duration</th>
<th>Incentive Durations (optional)</th>
</tr>
</thead>
<tbody>
<tr>
<td>7 days</td>
<td>3 minutes</td>
<td>7 days</td>
</tr>
<tr>
<td>1 month</td>
<td>5 minutes</td>
<td>7 days, 1 month</td>
</tr>
<tr>
<td>2 months</td>
<td>10 minutes</td>
<td>7 days, 1 month</td>
</tr>
<tr>
<td>3 months</td>
<td>15 minutes</td>
<td>1 month</td>
</tr>
<tr>
<td>6 months</td>
<td>30 minutes</td>
<td>1 month, 2 months</td>
</tr>
<tr>
<td>1 year</td>
<td>1 hour</td>
<td>1 month, 2 months, 3 months</td>
</tr>
</tbody>
</table>
<p>After 6 extensions the abo is cancelled automatically in the sandbox environment.</p>
</li>
</ol>
<h2 id="important-notice">Important Notice</h2>
<p>Please make sure the following settings in your project to make the plugin work well.</p>
<h4 id="disable-app-transport-security">Disable App Transport Security</h4>
<p>Adding the following entry to the <code>info.plist</code> file:</p>
<pre><code>&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;
&lt;dict&gt;
    &lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;
    &lt;true/&gt;
&lt;/dict&gt;
</code></pre>

<p>It should look like this:</p>
<p><img alt="" src="../../../imgs/ATS.png" /></p>
<h4 id="disable-bitcode-support">Disable Bitcode support</h4>
<p>You have to turn off <strong>Bitcode</strong> support. If you don't, cocos2d-x will fail to build.</p>
<h4 id="set-your-game-requires-full-screen">Set your game requires full screen</h4>
<p>If your game doesn't support all screen orientations, you will need to check <code>Requires full screen</code> in Xcode. If you do not, your app will fail Apple's submission process.</p>
<h4 id="whitelist-canopenurl-function">Whitelist canOpenURL function</h4>
<p>This setting depends on what plugins are in your project. You may need to add the required entry to the <code>info.plist</code>, under <code>LSApplicationQueriesSchemes</code>.</p>
<h2 id="configuration">Configuration</h2>
<p>SDKBOX Installer will automatically inject a sample configuration to your <code>sdkbox_config.json</code>, that you have to modify it before you can use it for your own app.</p>
<p>Here is an example of the IAP configuration, you need to replace <code>&lt;put the product id for ios here&gt;</code> with the product id from your <a href="http://itunesconnect.apple.com">iTunes Connect</a> or  replace <code>&lt;put your googleplay key here&gt;</code> from your <a href="https://play.google.com/apps/publish">Google Play Console</a>.</p>
<blockquote>
<p>For GooglePlay, you must specify the public key in the IAP configuration inspector panel. You can get it from the section "Services &amp; APIs" of Google Play Console.</p>
</blockquote>
<pre><code class="json">&quot;ios&quot; :
{
    &quot;iap&quot;:{
        &quot;items&quot;:{
            &quot;remove_ads&quot;:{
                &quot;id&quot;:&quot;&lt;put the product id for ios here&gt;&quot;
            }
        }
    }
},
&quot;android&quot;:
{
    &quot;iap&quot;:{
        &quot;key&quot;:&quot;&lt;put your googleplay key here&gt;&quot;,
        &quot;items&quot;:{
          &quot;remove_ads&quot;:{
              &quot;id&quot;:&quot;&lt;put the product id for android here&gt;&quot;
          }
        }
    }
}
</code></pre>

<p>If you have IAP items,  whose type is <strong>non-consumable</strong> or <strong>subscription</strong>, it is also necessary to supply the type for each item in your <code>sdkbox_config.json</code>. Taking the same <em>json</em> above your config might now look like this example:</p>
<pre><code class="json">&quot;android&quot;:
{
    &quot;iap&quot;:{
        &quot;key&quot;:&quot;&lt;put your googleplay key here&gt;&quot;,
        &quot;items&quot;:{
            &quot;coins&quot;:{ //this is consumable item
                &quot;id&quot;:&quot;&lt;put the product id for android here&gt;&quot;
            },
            &quot;remove_ads&quot;:{
                &quot;id&quot;:&quot;&lt;put the product id for android here&gt;&quot;,
                &quot;type&quot;:&quot;non_consumable&quot; //this is non-consumable item
            },
            &quot;subscription&quot;:{
                &quot;id&quot;:&quot;&lt;put the product id for android here&gt;&quot;,
                &quot;type&quot;:&quot;subs&quot; //this is subscription item
            }
        }
    }
}
</code></pre>

<p><strong>Note</strong>: the <code>key</code> in sdkbox_config.json should be get from <code>Google Play Console</code>, Google Console-&gt;Developer Tools-&gt;Services &amp; APIs, take a look at follow screenshot:</p>
<p><img alt="" src="../../../imgs/google_licensing_iab.png" /></p>
<h3 id="test-iap-for-ios">Test IAP for iOS</h3>
<ul>
<li>iOS simulator don't support purchase, please test with a real device.</li>
<li>You need to use your iTunesConnect account to create a test user in order to test IAP</li>
<li>Update bundle identifier to match your own bundle identifier</li>
</ul>
<h3 id="test-iap-for-android">Test IAP for android</h3>
<ol>
<li>To test Android IAP you need to publish you app with alpha/beta chanel</li>
<li>To test Android IAP you need to opt-in as an alpha tester <a href="https://play.google.com/apps/testing/org.cocos2dx.PluginTest">here</a></li>
<li>You can only test IAP in release build</li>
<li>Replace the <strong>key</strong> with your key. In <a href="https://play.google.com/apps/publish/">https://play.google.com/apps/publish/</a>, open your game, follow menu "Development tools -&gt; Services &amp; APIs -&gt; in-app billing"</li>
</ol>
<h3 id="skpaymenttransactionstatedeferred-test"><code>SKPaymentTransactionStateDeferred</code> test</h3>
<p><code>SKPaymentTransactionStateDeferred</code> is a middle transaction status of iOS IAP . for most developer, need't case about this status.</p>
<p>if you want to test this status, you can add <code>simulatesAskToBuyInSandbox</code> to <code>sdkbox_config.json</code>.</p>
<pre><code class="json">&quot;ios&quot;:
{
    &quot;iap&quot;: {
        &quot;simulatesAskToBuyInSandbox&quot;: true,
        &quot;items&quot;: { ... }
    }
}
</code></pre>

<p>more about <a href="https://stackoverflow.com/questions/25510678/how-to-test-skpaymenttransactionstatedeferred">SKPaymentTransactionStateDeferred</a></p>
<h3 id="initialization-opportunity">Initialization opportunity</h3>
<p>For the initialization of IAP, please note the following:</p>
<ol>
<li>After the app starts, initialize the IAP as early as possible.</li>
<li>Please setListener first , then init .</li>
<li>If there are multiple plugins, the IAP init should be called first.</li>
</ol>
<!---->

<h2 id="usage">Usage</h2>
<h3 id="initialize-iap">Initialize IAP</h3>
<ul>
<li>modify your Lua code to <code>init()</code> the plugin. This can be done anyplace, however it must be done before trying to use the plugin's features.</li>
</ul>
<pre><code class="lua">sdkbox.IAP:init()
</code></pre>

<h3 id="retrieve-latest-product-data">Retrieve latest Product data</h3>
<p>It's always a good idea to retrieve the latest product data from store when your game starts.</p>
<p>To retrieve latest IAP data, simply call <code>sdkbox.IAP:refresh()</code>.</p>
<blockquote>
<p><code>onProductRequestSuccess</code> if retrieved successfully.</p>
<p><code>onProductRequestFailure</code> if exception occurs.</p>
</blockquote>
<h3 id="make-a-purchase">Make a purchase</h3>
<p>To make a purchase call <code>sdkbox.IAP:purchase(name)</code></p>
<p><strong>Note:</strong> <strong>name</strong> is the name of the IAP item in your config file under <code>items</code> tag, not the product id you set in iTunes or GooglePlay Store.</p>
<blockquote>
<p><code>onSuccess</code> will be triggered if purchase is successful.</p>
<p><code>onFailure</code> will be triggered if purchase fails.</p>
<p><code>onCanceled</code> will be triggered if purchase is canceled by user.</p>
</blockquote>
<h3 id="restore-purchase">Restore purchase</h3>
<p>To restore purchase call <code>sdkbox.IAP:restore()</code>.</p>
<blockquote>
<p><code>onRestored</code> will be triggered if restore is successful.</p>
</blockquote>
<p><strong>Note:</strong> <code>onRestored</code> could be triggered multiple times.</p>
<h3 id="handling-purchase-events">Handling Purchase Events</h3>
<p>This allows you to catch the <code>IAP</code> events so that you can perform operations based upon the response from your players and IAP servers.</p>
<pre><code class="lua">sdkbox.IAP:setListener(function(args)
        if &quot;onSuccess&quot; == args.event then
                local product = args.product
                dump(product, &quot;onSuccess:&quot;)
        elseif &quot;onFailure&quot; == args.event then
                local product = args.product
                local msg = args.msg
                dump(product, &quot;onFailure:&quot;)
                print(&quot;msg:&quot;, msg)
        elseif &quot;onCanceled&quot; == args.event then
                local product = args.product
                dump(product, &quot;onCanceled:&quot;)
        elseif &quot;onRestored&quot; == args.event then
                local product = args.product
                dump(product, &quot;onRestored:&quot;)
        elseif &quot;onProductRequestSuccess&quot; == args.event then
                local products = args.products
                dump(products, &quot;onProductRequestSuccess:&quot;)
        elseif &quot;onProductRequestFailure&quot; == args.event then
                local msg = args.msg
                print(&quot;msg:&quot;, msg)
        else
                print(&quot;unknown event &quot;, args.event)
        end
end)
</code></pre>

<h2 id="remote-configuration">Remote Configuration</h2>
<p>Optionally, you can choose to use SDKBOX LiveOps to remotely update this plugin's configuration. <a href="../../../liveops/remote-config">Learn more</a></p>
<h2 id="iap-receipts-verification">IAP Receipts Verification</h2>
<p>If you're using remote configration for SDKBOX IAP Receipts verification is turn on by default <a href="../../../liveops/receipt-verification">Click here to learn more.</a>.</p>
<h3 id="implement-your-own-verification">Implement your own verification</h3>
<p>You can get the receipt data and verify it with your own server by calling following method</p>
<pre><code>sdkbox::IAP::enableUserSideVerification(true);
</code></pre>

<p>And then you should be able to access iap receipts using the following fields</p>
<pre><code>product.receipt;
product.receiptCipheredPayload;
</code></pre>

<blockquote>
<p>Note: iOS don't provide purchase receipt, only ciphered payload</p>
</blockquote>
<h2 id="promotion-iap">Promotion IAP</h2>
<h3 id="enable-promotion-iap">Enable Promotion IAP</h3>
<p>if you want to use iOS promotion iap</p>
<ol>
<li>implement <code>onShouldAddStorePayment</code> of <code>IAPListener</code> class.</li>
<li>configure <code>itunes connect</code></li>
</ol>
<p>we return true by default in <code>onShouldAddStorePayment</code>. this will not cancel or defer user's purchase action.</p>
<h3 id="promotion-iap-setting">Promotion IAP Setting</h3>
<p>You can also customize which promoted in-app purchases a user sees on a specific device with follow api:</p>
<ol>
<li><code>sdkbox.IAP.updateStorePromotionOrder({"remove_ads"})</code>;</li>
<li><code>sdkbox.IAP.updateStorePromotionVisibility('remove_ads', true)</code>;</li>
<li><code>sdkbox.IAP.fetchStorePromotionOrder()</code>;</li>
<li><code>sdkbox.IAP.fetchStorePromotionVisibility('remove_ads')</code>;</li>
</ol>
<p>more detail<a href="https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/StoreKitGuide/PromotingIn-AppPurchases/PromotingIn-AppPurchases.html">Promoting IAP official Document</a></p>
<h2 id="api-reference">API Reference</h2>
<h3 id="methods">Methods</h3>
<pre><code class="lua">sdkbox.IAP:init(jsonconfig)
</code></pre>

<blockquote>
<p>Initialize SDKBox IAP</p>
</blockquote>
<pre><code class="lua">sdkbox.IAP:setDebug(debug)
</code></pre>

<blockquote>
<p>Enable/disable debug logging</p>
</blockquote>
<pre><code class="lua">sdkbox.IAP:purchase(name)
</code></pre>

<blockquote>
<p>Make a purchase request</p>
</blockquote>
<pre>
@Param name is the name of the item specified in sdkbox_config.json
</pre>

<pre><code class="lua">sdkbox.IAP:refresh()
</code></pre>

<blockquote>
<p>Refresh the IAP data(title, price, description)</p>
</blockquote>
<pre><code class="lua">sdkbox.IAP:restore()
</code></pre>

<blockquote>
<p>Restore purchase</p>
</blockquote>
<pre><code class="lua">sdkbox.IAP:setListener(listener)
</code></pre>

<blockquote>
<p>Set listener for IAP</p>
</blockquote>
<pre><code class="lua">sdkbox.IAP:removeListener()
</code></pre>

<blockquote>
<p>Remove listener for IAP</p>
</blockquote>
<pre><code class="lua">sdkbox.IAP:enableUserSideVerification()
</code></pre>

<pre><code class="lua">sdkbox.IAP:isAutoFinishTransaction()
</code></pre>

<blockquote>
<p>get auto invoke finishTransaction flag</p>
</blockquote>
<pre><code class="lua">sdkbox.IAP:setAutoFinishTransaction(b)
</code></pre>

<blockquote>
<p>set auto invoke finishTransaction flag</p>
</blockquote>
<pre><code class="lua">sdkbox.IAP:finishTransaction(productid)
</code></pre>

<blockquote>
<p>to invoke ios finishTransaction api</p>
</blockquote>
<pre><code class="lua">sdkbox.IAP:fetchStorePromotionOrder()
</code></pre>

<pre><code class="lua">sdkbox.IAP:updateStorePromotionOrder(productNames)
</code></pre>

<pre><code class="lua">sdkbox.IAP:fetchStorePromotionVisibility(productName)
</code></pre>

<pre><code class="lua">sdkbox.IAP:updateStorePromotionVisibility(productName, visibility)
</code></pre>

<pre><code class="lua">sdkbox.IAP:getPurchaseHistory()
</code></pre>

<blockquote>
<p>get all purchase history, include cancelled, expired</p>
</blockquote>
<pre><code class="lua">sdkbox.IAP:getInitializedErrMsg()
</code></pre>

<blockquote>
<p>get initialized error message</p>
</blockquote>
<pre><code class="lua">sdkbox.IAP:requestUpdateTransaction()
</code></pre>

<blockquote>
<p>request all unfinish transaction, and retrigger onSuccess, onFailed or onCancel event with corresponding transaction.</p>
<p>just valid on iOS</p>
<p>e.g. if there have two transaction (one is success, on is canceled) havn't been finish,
     after invoke requestUpdateTransaction, onSuccess will trigger with the success transaction, onCancelled will trigger with the cancelled transaction.</p>
<p>Note: for most developer, this api is needn't, onSuccess, onFailed or onCancel will auto trigger when transaction updated.</p>
</blockquote>
<h3 id="listeners">Listeners</h3>
<pre><code class="lua">onInitialized(success)
</code></pre>

<blockquote>
<p>Called when IAP initialized</p>
</blockquote>
<pre><code class="lua">onSuccess(p)
</code></pre>

<blockquote>
<p>Called when an IAP processed successfully</p>
</blockquote>
<pre><code class="lua">onFailure(p, msg)
</code></pre>

<blockquote>
<p>Called when an IAP fails</p>
</blockquote>
<pre><code class="lua">onCanceled(p)
</code></pre>

<blockquote>
<p>Called when user canceled the IAP</p>
</blockquote>
<pre><code class="lua">onRestored(p)
</code></pre>

<blockquote>
<p>Called when server returns the IAP items user already purchased
@note this callback will be called multiple times if there are multiple IAP</p>
</blockquote>
<pre><code class="lua">onProductRequestSuccess(products)
</code></pre>

<blockquote>
<p>Called the product request is successful, usually developers use product request to update the latest info(title, price) from IAP</p>
</blockquote>
<pre><code class="lua">onProductRequestFailure(msg)
</code></pre>

<blockquote>
<p>Called when the product request fails</p>
</blockquote>
<pre><code class="lua">onRestoreComplete(ok, msg)
</code></pre>

<blockquote>
<p>Called when the restore completed</p>
</blockquote>
<pre><code class="lua">onShouldAddStorePayment(productName)
</code></pre>

<pre><code class="lua">onFetchStorePromotionOrder(productNames, error)
</code></pre>

<pre><code class="lua">onFetchStorePromotionVisibility(productName, visibility, error)
</code></pre>

<pre><code class="lua">onUpdateStorePromotionOrder(error)
</code></pre>

<pre><code class="lua">onUpdateStorePromotionVisibility(error)
</code></pre>

<pre><code class="lua">onPurchaseHistory(purchases)
</code></pre>

<pre><code class="lua">onConsumed(p, error)
</code></pre>

<blockquote>
<p>Called when consume completed, just trigger on android</p>
</blockquote>
<pre><code class="lua">onDeferred(p)
</code></pre>

<blockquote>
<p>Called when IAP pay deferred</p>
</blockquote>
<pre>
Note: Pay deferred status is a middle status, for most developer, needn't case this status
this status will change to success or failed or cancel, its final status is pending external action.
Please DO NOT finishTransaction when status is deferred.
</pre>

<h2 id="manual-integration">Manual Integration</h2>
<p>If the <em>SDKBOX Installer</em> <strong>fails</strong> to complete successfully, it is possible to integrate SDKBOX manually. If the installer complete successfully, please <strong>do not</strong> complete anymore of this document. It is not necessary.</p>
<p>These steps are listed last in this document on purpose as they are seldom needed. If you find yourself using these steps, please, after completing, double back and re-read the steps above for other integration items.</p>
<h2 id="manual-integration-for-ios">Manual Integration For iOS</h2>
<p>Drag and drop the following frameworks from the <strong>plugins/ios</strong> folder of the <code>IAP</code> bundle into your Xcode project, check <code>Copy items if needed</code> when adding frameworks:</p>
<blockquote>
<p>sdkbox.framework</p>
<p>PluginIAP.framework</p>
</blockquote>
<p>The above frameworks depend upon other frameworks. You also need to add the following system frameworks, if you don't already have them:</p>
<blockquote>
<p>Security.framework</p>
<p>StoreKit.framework</p>
<p>AdSupport.framework</p>
<p>SystemConfiguration.framework</p>
</blockquote>
<p>Copy all source and header files from <code>plugin/luabindings/</code> to your projects <code>Classes</code> folder.</p>
<p>Add these same files, that you just copied, to Xcode by either dragging and dropping them into Xcode or by using <strong>File -&gt; Add files to...</strong>.</p>
<h2 id="manual-integration-for-android">Manual Integration For Android</h2>
<p>SDKBOX supports three different kinds of <strong>Android</strong> projects <strong>command-line</strong>, <strong>eclipse</strong> and <strong>Android Studio</strong>. </p>
<ul>
<li><code>proj.android</code> will be used as our <code>&lt;project_root&gt;</code> for <strong>command-line</strong> and <strong>eclipse</strong> project</li>
<li><code>proj.android-studio</code> will be used as our <code>&lt;project_root&gt;</code> for <strong>Android Studio</strong> project.</li>
</ul>
<h3 id="copy-files">Copy Files</h3>
<h4 id="copy-jar-files">Copy jar files</h4>
<p>Copy the following <strong>jar</strong> files from <code>plugin/android/libs</code> folder of this
bundle into your project's <strong><project_root>/libs</strong> folder.</p>
<blockquote>
<p>billing-1.0.jar</p>
<p>PluginIAP.jar</p>
<p>sdkbox.jar</p>
</blockquote>
<ul>
<li>
<p>If you're using cocos2d-x from source copy the <strong>jar</strong> files to:</p>
<p>Android command-line:
<code>cocos2d/cocos/platform/android/java/libs</code></p>
<p>Android Studio:
<pre>
cocos2d/cocos/platform/android/java/libs
cocos2d/cocos/platform/android/libcocos2dx/libs
</pre></p>
</li>
<li>
<p>If you're using cocos2d-js or lua copy the <strong>jar</strong> files to:</p>
<p>Android command-line:
<code>frameworks/cocos2d-x/cocos/platform/android/java/libs</code></p>
<p>Android Studio:
<pre>
frameworks/cocos2d-x/cocos/platform/android/java/libs
frameworks/cocos2d-x/cocos/platform/android/libcocos2dx/libs
</pre></p>
</li>
<li>
<p>If you're using prebuilt cocos2d-x copy the <strong>jar</strong> files to:</p>
<p>Android command-line:
<code>proj.android/libs</code></p>
</li>
</ul>
<h4 id="copy-jni-libs">Copy jni libs</h4>
<p>Copy and overwrite all the folders from <code>plugin/android/jni</code>
to your <code>&lt;project_root&gt;/jni/</code> directory.</p>
<h3 id="edit-androidmanifestxml">Edit <code>AndroidManifest.xml</code></h3>
<p>Include the following permissions above the <strong>application tag</strong>:</p>
<pre><code class="xml">&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;
&lt;uses-permission android:name=&quot;com.android.vending.BILLING&quot;/&gt;
</code></pre>

<p>Include the following activity in the <strong>application tag</strong>:</p>
<pre><code class="xml">&lt;activity android:configChanges=&quot;keyboard|keyboardHidden|screenLayout|screenSize|orientation&quot; android:name=&quot;com.android.billingclient.api.ProxyBillingActivity&quot; android:theme=&quot;@android:style/Theme.Translucent.NoTitleBar&quot; /&gt;
</code></pre>

<h3 id="edit-androidmk">Edit <code>Android.mk</code></h3>
<p>Edit <code>&lt;project_root&gt;/jni/Android.mk</code> to:</p>
<p>Add additional dependencies to <strong>LOCAL_WHOLE_STATIC_LIBRARIES</strong>:</p>
<pre><code>LOCAL_WHOLE_STATIC_LIBRARIES += PluginIAP
LOCAL_WHOLE_STATIC_LIBRARIES += sdkbox
</code></pre>

<p>Add a call to:</p>
<pre><code>$(call import-add-path,$(LOCAL_PATH))
</code></pre>

<p>before any <strong>import-module</strong> statements.</p>
<p>Add additional <strong>import-module</strong> statements at the end:</p>
<pre><code>$(call import-module, ./sdkbox)
$(call import-module, ./pluginiap)
</code></pre>

<p>This means that your ordering should look similar to this:</p>
<pre><code>$(call import-add-path,$(LOCAL_PATH))
$(call import-module, ./sdkbox)
$(call import-module, ./pluginiap)
</code></pre>

<p><strong>Note:</strong> It is important to make sure these statements are above the existing <code>$(call import-module,./prebuilt-mk)</code> statement, if you are using the pre-built libraries.</p>
<h3 id="modify-applicationmk-cocos2d-x-v30-v32-only">Modify <code>Application.mk</code> (Cocos2d-x v3.0 - v3.2 only)</h3>
<p>Edit <code>&lt;project_root&gt;/jni/Application.mk</code> to make sure <strong>APP_STL</strong> is defined
correctly. If <code>Application.mk</code> contains <code>APP_STL := c++_static</code>, it should be
changed to:</p>
<pre><code>APP_STL := gnustl_static
</code></pre>

<p>Copy all source and header files from <code>plugin/luabindings/</code> to your projects <code>Classes</code> folder.</p>
<p>Add all <code>.cpp</code> files, that you just copied, to <code>Android.mk</code> in the <strong>LOCAL_SRC_FILES</strong> section. Example</p>
<pre><code>LOCAL_SRC_FILES := hellocpp/main.cpp \
                ../../Classes/AppDelegate.cpp \
                ../../Classes/HelloWorldScene.cpp \
                                ../../Classes/NewSourceFile.cpp
</code></pre>

<h3 id="modify-appactivityjava">Modify <strong>AppActivity.java</strong></h3>
<h4 id="plugin-2403">Plugin &gt;= 2.4.0.3</h4>
<ol>
<li>Find the <strong>AppActivity.java</strong></li>
</ol>
<pre><code class="bash">find . -name &quot;AppActivity.java&quot;
</code></pre>

<ol>
<li>Replace <code>extends Cocos2dxActivity</code> with <code>extends com.sdkbox.plugin.SDKBoxActivity</code></li>
</ol>
<p>Example of the directory where the <strong>AppActivity.java</strong> file is located:</p>
<pre><code>cpp
  - proj.android/src/org/cocos2dx/cpp/AppActivity.java
  - proj.android-studio/app/src/org/cocos2dx/cpp/AppActivity.java
  - proj.android/app/src/org/cocos2dx/cpp/AppActivity.java ( from cocos2d-x 3.17)

lua
  - frameworks/runtime-src/proj.android/src/org/cocos2dx/lua/AppActivity.java
  - frameworks/runtime-src/proj.android-studio/app/src/org/cocos2dx/lua/AppActivity.java
  - frameworks/runtime-src/proj.android/app/src/org/cocos2dx/lua/AppActivity.java (from cocos2d-x 3.17)

js
  - frameworks/runtime-src/proj.android/src/org/cocos2dx/javascript/AppActivity.java
  - frameworks/runtime-src/proj.android/app/src/org/cocos2dx/javascript/AppActivity.java ( from cocos2d-x 3.17)
</code></pre>

<h4 id="plugin-2403_1">Plugin &lt; 2.4.0.3</h4>
<ul>
<li>
<p>If you're using cocos2d-x from source, assuming you are in the <strong>proj.android</strong> directory, <strong>Cocos2dxActivity.java</strong> is located:</p>
<p><code>../../cocos2d-x/cocos/platform/android/java/src/org/cocos2dx/
lib/Cocos2dxActivity.java</code></p>
</li>
<li>
<p>If you're using the prebuilt cocos2d-x libraries assuming you are in the <code>proj.android</code> directory, <strong>Cocos2dxActivity.java</strong> is located:</p>
<p><code>./src/org/cocos2dx/lib/Cocos2dxActivity.java</code></p>
</li>
</ul>
<p><strong>Note:</strong> When using Cocos2d-x from source, different versions have <strong>Cocos2dxActivity.java</strong> in a different location. One way to find the location is to look in <strong>proj.android/project.properties</strong>. Example:
  <code>android.library.reference.1=../../cocos2d-x/cocos/platform/android/java</code></p>
<p>In this case, <strong>Cocos2dxActivity.java</strong> should be located at:</p>
<pre><code>../../cocos2d-x/cocos/platform/android/java/src/org/cocos2dx/lib/Cocos2dxActivity.java
</code></pre>

<ul>
<li>Modify <strong>Cocos2dxActivity.java</strong> to add the following imports:</li>
</ul>
<pre><code class="java">import android.content.Intent;
import com.sdkbox.plugin.SDKBox;
</code></pre>

<ul>
<li>Second, modify <strong>Cocos2dxActivity.java</strong> to edit the <code>onCreate(final Bundle savedInstanceState)</code> function to add a call to <code>SDKBox.init(this);</code>. The placement of this call is important. It must be done after the call to <code>onLoadNativeLibraries();</code>. Example:</li>
</ul>
<pre><code class="java">onLoadNativeLibraries();
SDKBox.init(this);
</code></pre>

<ul>
<li>
<p>Last, we need to insert the proper <strong>overrides</strong> code. There are a few rules here.</p>
<ul>
<li>
<p>If the method listed has not been defined, <strong>add it</strong>.</p>
</li>
<li>
<p>If the method listed has been defined, add the calls to <code>SDKBox</code> in the <strong>same</strong> existing function.</p>
</li>
</ul>
</li>
</ul>
<pre><code class="java">    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
          if(!SDKBox.onActivityResult(requestCode, resultCode, data)) {
            super.onActivityResult(requestCode, resultCode, data);
          }
    }
    @Override
    protected void onStart() {
          super.onStart();
          SDKBox.onStart();
    }
    @Override
    protected void onStop() {
          super.onStop();
          SDKBox.onStop();
    }
    @Override
    protected void onResume() {
          super.onResume();
          SDKBox.onResume();
    }
    @Override
    protected void onPause() {
          super.onPause();
          SDKBox.onPause();
    }
    @Override
    public void onBackPressed() {
          if(!SDKBox.onBackPressed()) {
            super.onBackPressed();
          }
    }
</code></pre>

<h2 id="manual-integration-for-google-play-services-sdk-dependent-library-only">Manual Integration for Google Play Services SDK (dependent library only)</h2>
<h3 id="suggestion">Suggestion</h3>
<p>Please try the SDKBOX installer first. It will do all the following step for you automatically.</p>
<pre><code class="bash">$ sdkbox import googleplayservices
</code></pre>

<h3 id="modify-projectproperties">Modify <code>project.properties</code></h3>
<p>An <strong>Android Library Reference</strong> for <strong>Google Play Services</strong> is required. The
path will be different depending upon your setup. Also, this is an additional
download that does not come as part of a standard install. To install use the
<strong>sdk installer</strong> and choose <strong>extras-&gt;google play services</strong>. Here is an example of what this line could look like:</p>
<pre><code>android.library.reference.1=
../android/sdk.latest/extras/google/google_play_services/libproject/
google-play-services_lib
</code></pre>

<p><strong>Note:</strong> if you already have an <code>android.library.reference.1</code> you can add
another by incrementing the number as <code>android.library.reference.2</code>, etc.</p>
<h3 id="integration-manually">Integration manually</h3>
<p>We make a lite version of Google Play Services, the project repo is <a href="https://github.com/darkdukey/Google-Play-Service-Lite">https://github.com/darkdukey/Google-Play-Service-Lite</a></p>
<h4 id="copy-files_1">Copy Files</h4>
<p>Copy the <code>gps</code> folder from <code>plugin</code> folder of this bundle into your project's <strong><project_root>/libs</strong> folder.</p>
<ul>
<li>
<p>If you're using cocos2d-x from source copy the <code>gps</code> folder to:</p>
<p>Android command-line:
<code>cocos2d/cocos/platform/android/java/libs</code></p>
<p>Android Studio:
<code>cocos2d/cocos/platform/android/libcocos2dx/libs</code></p>
</li>
<li>
<p>If you're using cocos2d-js or lua copy the <code>gps</code> folder to:</p>
<p>Android command-line:
<code>frameworks/cocos2d-x/cocos/platform/android/java/libs</code></p>
<p>Android Studio:
<code>frameworks/cocos2d-x/cocos/platform/android/libcocos2dx/libs</code></p>
</li>
<li>
<p>If you're using prebuilt cocos2d-x copy the <code>gps</code> folder to:</p>
<p>Android command-line:
<code>&lt;project_root&gt;/libs</code></p>
</li>
</ul>
<h4 id="modify-files-for-eclipse">Modify files for Eclipse</h4>
<ol>
<li>Modify project.properties</li>
</ol>
<pre><code># For source project
android.library.reference.2=../cocos2d/cocos/platform/android/java/libs/gps/

# Or
# For framework project
android.library.reference.1=libs/gps/
</code></pre>

<h4 id="modify-files-for-android-studio">Modify files for Android Studio</h4>
<h5 id="1-modify-cocos2dcocosplatformandroidlibcocos2dxbuildgradle">1. Modify cocos2d/cocos/platform/android/libcocos2dx/build.gradle</h5>
<pre><code> dependencies {
+    compile project(':gps')
     compile fileTree(dir: '../java/libs', include: ['*.jar'])
 }
</code></pre>

<h5 id="2-modify-projandroid-studioappprojectproperties">2. Modify proj.android-studio/app/project.properties</h5>
<pre><code> # Project target.
 target=android-14
+android.library.reference.1=../cocos2d/cocos/platform/android/java/libs/gps/
</code></pre>

<h5 id="3-modify-projandroid-studiosettingsgradle">3. Modify proj.android-studio/settings.gradle</h5>
<pre><code> project(':libcocos2dx').projectDir = new File(settingsDir, '../cocos2d/cocos/platform/android/libcocos2dx')
 include ':your_project_name'
 project(':your_project_name').projectDir = new File(settingsDir, 'app')
+
+include ':gps'
+project(':gps').projectDir = new File(settingsDir, '../cocos2d/cocos/platform/android/java/libs/gps')
</code></pre>

<h2 id="proguard-optional">Proguard (optional)</h2>
<ul>
<li>Edit <code>project.properties</code>  to specify a <code>Proguard</code> configuration file. Example:</li>
</ul>
<pre><code>proguard.config=proguard.cfg
</code></pre>

<ul>
<li>proguard.cfg:</li>
</ul>
<pre><code># If your project uses WebView with JS, uncomment the following
# and specify the fully qualified class name to the JavaScript interface
# class:
#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
#   public *;
#}

# cocos2d-x
-keep public class org.cocos2dx.** { *; }
-dontwarn org.cocos2dx.**
-keep public class com.chukong.** { *; }
-dontwarn com.chukong.**

# google play service
-keep public class com.google.android.gms.** { public *; }
-dontwarn com.google.android.gms.**

-keep class com.google.protobuf.** { *; }
-dontwarn com.google.protobuf.**

-keep class * extends java.util.ListResourceBundle {
    protected Object[][] getContents();
}

-keep public class com.google.android.gms.common.internal.safeparcel.SafeParcelable {
    public static final *** NULL;
}

-keepnames @com.google.android.gms.common.annotation.KeepName class *
-keepclassmembernames class * {
    @com.google.android.gms.common.annotation.KeepName *;
}

-keepnames class * implements android.os.Parcelable {
    public static final ** CREATOR;
}

#sdkbox
-keep public class com.sdkbox.** { *; }
-dontwarn com.sdkbox.**
</code></pre>

<p><strong>Note:</strong> Proguard only works with <strong>Release</strong> builds (i.e <code>cocos run -m release</code>) debug builds do not invoke Proguard rules.</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Build Date UTC :2020-12-07 02:06:06.589118, Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        
        <script src="../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script>var base_url = '../../..';</script>
        <script src="../../../js/base.js"></script>
        


        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-70044300-2', 'auto');
            ga('send', 'pageview');
        </script>
        
    </body>
</html>
